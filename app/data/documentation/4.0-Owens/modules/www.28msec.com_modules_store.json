{ "ns" : "http://www.28msec.com/modules/store", "description" : " This module provides functions to perform MongoDB query operations\n (i.e. find and aggregate) on the database associated with the\n project.\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The module is always imported so you don't need to import it explicitly.\n Also, you don't need to fully qualify the function if you want to invoke it.</p>\n", "sees" : [  ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">28msec</xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "http://zorba.io/annotations", "prefix" : "an" }, { "uri" : "http://www.28msec.com/modules/mongodb/types", "prefix" : "mongo" }, { "uri" : "http://www.28msec.com/modules/store", "prefix" : "store" }, { "uri" : "http://zorba.io/options/versioning", "prefix" : "ver" } ], "functions" : [ { "isDocumented" : true, "arity" : 2, "name" : "aggregate", "qname" : "store:aggregate", "signature" : "($collection as string, $pipeline as array()) as object() external", "description" : " Performs a MongoDB aggregation framework job on the given collection.\n The <em xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">$pipeline</em> parameter needs to specify a valid aggregation\n framework pipeline. For example,\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n  [\n    { $project : {\n       author : 1,\n       tags : 1,\n    } },\n    { $unwind : \"$tags\" },\n    { $group : {\n       _id : { tags : \"$tags\" },\n       authors : { $addToSet : \"$author\" }\n    } }\n ]\n </pre>\n The function returns the result as one object. The object contains\n the field named \"ok\" with value 0 if the execution failed or 1 if\n it succeeded. If it succeeded, the result is contained as an array\n in the result field. Otherwise, the errmsg field contains the description\n of the error. For exampl,e\n <pre xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n {\n   \"result\" : [ ... ],\n   \"ok\" : 1\n }\n </pre>\n", "summary" : "<p> Performs a MongoDB aggregation framework job on the given collection.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "collection", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection to execute the job on</div>" }, { "name" : "pipeline", "type" : "array()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the specification of the pipeline to execute</div>" } ], "returns" : { "type" : "object()", "description" : "an object with the result or the error message." }, "errors" : [  ] }, { "isDocumented" : false, "arity" : 1, "name" : "clear-if", "qname" : "store:clear-if", "signature" : "($cond as boolean) as integer", "description" : "", "summary" : "", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "cond", "type" : "boolean", "occurrence" : null, "description" : "" } ], "returns" : { "type" : "integer", "description" : "" }, "errors" : [  ] }, { "isDocumented" : false, "arity" : 0, "name" : "clear", "qname" : "store:clear", "signature" : "() as integer external", "description" : "", "summary" : "", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [  ], "returns" : { "type" : "integer", "description" : "" }, "errors" : [  ] }, { "isDocumented" : false, "arity" : 1, "name" : "collection-chunk-specs", "qname" : "store:collection-chunk-specs", "signature" : "($name as string) as object()*", "description" : "", "summary" : "", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "name", "type" : "string", "occurrence" : null, "description" : "" } ], "returns" : { "type" : "object()*", "description" : "" }, "errors" : [  ] }, { "isDocumented" : false, "arity" : 2, "name" : "collection-chunk-specs", "qname" : "store:collection-chunk-specs", "signature" : "($name as string, $chunk-size as integer) as object()* external", "description" : "", "summary" : "", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "name", "type" : "string", "occurrence" : null, "description" : "" }, { "name" : "chunk-size", "type" : "integer", "occurrence" : null, "description" : "" } ], "returns" : { "type" : "object()*", "description" : "" }, "errors" : [  ] }, { "isDocumented" : false, "arity" : 2, "name" : "collection-chunk", "qname" : "store:collection-chunk", "signature" : "($name as string, $chunk as object()) as item()* external", "description" : "", "summary" : "", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "name", "type" : "string", "occurrence" : null, "description" : "" }, { "name" : "chunk", "type" : "object()", "occurrence" : null, "description" : "" } ], "returns" : { "type" : "item()*", "description" : "" }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 2, "name" : "find", "qname" : "store:find", "signature" : "($coll as string, $query as object()) as object()*", "description" : " Performs a MongoDB query operation on the given collection and\n returns all matches.\n", "summary" : "<p> Performs a MongoDB query operation on the given collection and\n returns all matches.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "coll", "type" : "string", "occurrence" : null, "description" : "" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query operation to perform</div>" } ], "returns" : { "type" : "object()*", "description" : "all matches returned by the given query operation" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">zerr:ZSTR0009 if the given collection does not exist</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "find", "qname" : "store:find", "signature" : "($coll as string, $query as object(), $options as object()) as object()* external", "description" : " Performs a MongoDB query operation on the given collection and\n returns all matches.\n Available options:\n <ul xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n   <li>to-return: the maximum number of objects to return (0 = unlimited)</li>\n   <li>to-skip: start with the n-th object</li>\n   <li>batch-size: the number of objects to return in one batch</li>\n   <li>slave-ok: allow this query to be run against a replica secondary</li>\n   <li>await-data: the server will block for some extra time before returning,\n   waiting for more data to return</li>\n   <li>partial-results: return partial results if some shards are down instead\n   of returning an error</li>\n </ul>\n", "summary" : "<p> Performs a MongoDB query operation on the given collection and\n returns all matches.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "coll", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query operation to perform</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "object()*", "description" : "all matches returned by the given query operation" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">zerr:ZSTR0009 if the given collection does not exist</xqdoc:error>" ] }, { "isDocumented" : false, "arity" : 1, "name" : "flush-if", "qname" : "store:flush-if", "signature" : "($cond as boolean) as empty-sequence()", "description" : "", "summary" : "", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "cond", "type" : "boolean", "occurrence" : null, "description" : "" } ], "returns" : { "type" : "empty-sequence()", "description" : "" }, "errors" : [  ] }, { "isDocumented" : false, "arity" : 0, "name" : "flush", "qname" : "store:flush", "signature" : "() as empty-sequence() external", "description" : "", "summary" : "", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [  ], "returns" : { "type" : "empty-sequence()", "description" : "" }, "errors" : [  ] } ], "variables" : [  ] }