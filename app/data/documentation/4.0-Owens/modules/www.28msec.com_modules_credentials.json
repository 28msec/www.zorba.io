{ "ns" : "http://www.28msec.com/modules/credentials", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This module provides functionality for storing credentials\n using an AES-encrypted file the project configuration folder.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Specifically, the credentials will be stored in the <tt>credentials</tt>\n file in the <tt>config</tt> folder in the project root folder.\n The credentials file is encrypted using 256bit AES encryption. The AES\n key is computed using the project seed. If the project seed is changed the\n credential store is re-encrypted transparently.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Each credential has an associated name and category.\n Credentials can be retrieved specifying their name and category.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For each category, it is possible to specify the default credentials.\n A category default credentials can then be easily retrieved. </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The name of credentials and categories can contain lowercase or\n uppercase letters, digits, and the following special characters: \"_\" , \"-\",\n \".\". Additionally it must not be empty and must start with a lowercase\n or uppercase letter.</p>\n", "sees" : [  ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Federico Cavalieri</xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "http://zorba.io/annotations", "prefix" : "an" }, { "uri" : "http://www.28msec.com/modules/credentials", "prefix" : "credentials" }, { "uri" : "http://www.w3.org/2005/xqt-errors", "prefix" : "err" }, { "uri" : "http://jsoniq.org/errors", "prefix" : "jerr" }, { "uri" : "http://www.28msec.com/modules/mongodb", "prefix" : "mongo" }, { "uri" : "http://zorba.io/options/versioning", "prefix" : "ver" } ], "functions" : [ { "isDocumented" : true, "arity" : 3, "name" : "add-credentials", "qname" : "credentials:add-credentials", "signature" : "($category as string, $name as string, $credentials as object()) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Adds the given credentials to the credential store.\n The credentials are not set as default.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If credentials  with the given name and category are already present an\n error is raised.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:add-credentials(\"S3\", \"DataBucket\", { ... });\n </pre>\n </p>\n", "summary" : "<p>  Adds the given credentials to the credential store.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "category", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials category name.</div>" }, { "name" : "name", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials name.</div>" }, { "name" : "credentials", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object containing the credentials data.</div>" } ], "returns" : { "type" : "object()", "description" : "the credential object" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:EXIST if credentials with the given name and category are already present.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NAME if the credentials or category name is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:MONGO-DEFAULT if the specified credentials and category name correspond with the default MongoDB credentials</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:TEST if a connection cannot be established using the specified credentials</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "add-credentials", "qname" : "credentials:add-credentials", "signature" : "($category as string, $name as string, $credentials as object(), $default as boolean) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Adds the given credentials to the credential store,\n either as default or not.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If credentials  with the given name and category are already present an\n error is raised.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:add-credentials(\"S3\", \"DataBucket\", { ... }, true);\n </pre>\n </p>\n", "summary" : "<p>  Adds the given credentials to the credential store,\n either as default or not.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "category", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials category name.</div>" }, { "name" : "name", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials name.</div>" }, { "name" : "credentials", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object containing the credentials data.</div>" }, { "name" : "default", "type" : "boolean", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Whether the credentials will be default or not.</div>" } ], "returns" : { "type" : "object()", "description" : "the credential object" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:EXIST if credentials with the given name and category are already present.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NAME if the credentials or category name is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:MONGO-DEFAULT if trying to add the default MongoDB credentials</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:TEST if a connection cannot be established using the specified credentials</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "credentials", "qname" : "credentials:credentials", "signature" : "($category as string) as object()?", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the given category's default credentials, if any.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If no default credentials are present for the given category\n the empty sequence is returned.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:credentials(\"S3\")\n </pre>\n </p>\n", "summary" : "<p>  Returns the given category's default credentials, if any.</p>", "annotation_str" : " %an:strictlydeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "strictlydeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "category", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The category name.</div>" } ], "returns" : { "type" : "object()?", "description" : "The specified category default credentials, if any." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NAME if the credentials or category name is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:MONGO-DEFAULT if the specified category is MongoDB</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "credentials", "qname" : "credentials:credentials", "signature" : "($category as string, $name as string) as object()?", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the specified credentials, if present in the credential store.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If the specified credentials are not present the empty sequence is returned.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:credentials(\"S3\", \"DataBucket\")\n </pre>\n </p>\n", "summary" : "<p>  Returns the specified credentials, if present in the credential store.</p>", "annotation_str" : " %an:strictlydeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "strictlydeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "category", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials category name.</div>" }, { "name" : "name", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials name.</div>" } ], "returns" : { "type" : "object()?", "description" : "The specified credentials, if present." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NAME if the credentials or category name is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:MONGO-DEFAULT if the credentials or category name is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 0, "name" : "list-categories", "qname" : "credentials:list-categories", "signature" : "() as array()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Lists all the credentials categories in the credentials store.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If no credentials are stored the empty sequence is returned.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:list-categories()\n </pre>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The returned array contains the name of each distinct credential category.</p>\n", "summary" : "<p>  Lists all the credentials categories in the credentials store.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [  ], "returns" : { "type" : "array()", "description" : "An array of all the distinct credentials categories in the credentials store." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "list-category-credentials", "qname" : "credentials:list-category-credentials", "signature" : "($category-name as string) as array()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Lists all the credentials of the specified category in the\n credentials store.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If no credentials for the given category are stored the empty\n sequence is returned.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:list-category-credentials(\"category-name\")\n </pre>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The returned array contains one object for each credential. Each object has\n the following structure:\n <pre>\n {\n   \"category\": \"category-name\",\n   \"name\": \"credential-name\",\n   \"default\": true\n }\n </pre>\n Specifically the fields of each object have the following meaning:\n <ul>\n  <li>category: the name of the credentials category (string)</li>\n  <li>name: the name of the credentials (string)</li>\n  <li>default: whether the credentials are the default credentials in\n      their category (boolean)</li>\n </ul>\n </p>\n", "summary" : "<p>  Lists all the credentials of the specified category in the\n credentials store.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "category-name", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials category name.</div>" } ], "returns" : { "type" : "array()", "description" : "An array of all the credentials of the specified category in the credentials store." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NAME if the credentials or category name is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 0, "name" : "list-credentials", "qname" : "credentials:list-credentials", "signature" : "() as array()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Lists all the credentials in the credentials store.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If no credentials are stored the empty sequence is returned.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:list-credentials()\n </pre>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The returned array contains one object for each credential. Each object has\n the following structure:\n <pre>\n {\n   \"category\": \"category-name\",\n   \"name\": \"credential-name\",\n   \"default\": true\n }\n </pre>\n Specifically the fields of each object have the following meaning:\n <ul>\n  <li>category: the name of the credentials category (string)</li>\n  <li>name: the name of the credentials (string)</li>\n  <li>default: whether the credentials are the default credentials in\n      their category (boolean)</li>\n </ul>\n </p>\n", "summary" : "<p>  Lists all the credentials in the credentials store.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [  ], "returns" : { "type" : "array()", "description" : "An array of all credentials in the credentials store." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "make-default", "qname" : "credentials:make-default", "signature" : "($category as string, $name as string) as empty-sequence()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Makes the specified credentials the default for their category.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">It is not allowed to call this method on credentials in the \"MongoDB\" category.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If the specified credentials are not present an error is raised.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:make-default(\"S3\", \"DataBucket\");\n </pre>\n </p>\n", "summary" : "<p>  Makes the specified credentials the default for their category.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "category", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials category name.</div>" }, { "name" : "name", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials name.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NOT-EXIST if no credentials with the given name and category are present.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NAME if the credentials or category name is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:MONGO-DEFAULT if the specified category is MongoDB</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "remove-credentials", "qname" : "credentials:remove-credentials", "signature" : "($category as string, $name as string) as empty-sequence()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Removes the specified credentials from the credential store.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If no credentials with the given name and category are present\n in the category store an error is raised.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:remove-credentials(\"S3\", \"DataBucket\");\n </pre>\n </p>\n", "summary" : "<p>  Removes the specified credentials from the credential store.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "category", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials category name.</div>" }, { "name" : "name", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials name.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "The empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NOT-EXIST if no credentials with the given name and category exist.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NAME if the credentials or category name is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:MONGO-DEFAULT if the specified credentials and category name correspond with the default MongoDB credentials</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 5, "name" : "update-credentials", "qname" : "credentials:update-credentials", "signature" : "($category as string, $name as string, $new-default as boolean?, $new-name as string?, $new-credentials as object()?) as empty-sequence()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Updates the specified credentials in the credential store.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">It is possible to specify whether the credentials should become or stop being the\n default credentials in their category, rename the credentials or change the credentials\n object. These three changes are specified by means of the $new-default, $new-name and\n $new-credentials parameter. If the corresponding parameter is the empty sequence the\n corresponding property will not be changed.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For example the following query renames the \"DataBucket\" credentials in the \"S3\"\n category as \"Bucket\":\n <pre>\n import module namespace credentials = \"http://www.28msec.com/modules/credentials\";\n credentials:update-credentials(\"S3\", \"DataBucket\", (), \"Bucket\", () );\n </pre>\n </p>\n", "summary" : "<p>  Updates the specified credentials in the credential store.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "category", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials category name.</div>" }, { "name" : "name", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The credentials name.</div>" }, { "name" : "new-default", "type" : "boolean", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> Whether the credentials should become/stop being the default credentials in their category. If it is an empty sequence the current default property will not be changed.</div>" }, { "name" : "new-name", "type" : "string", "occurrence" : "?", "description" : "" }, { "name" : "new-credentials", "type" : "object()", "occurrence" : "?", "description" : "" } ], "returns" : { "type" : "empty-sequence()", "description" : "the empty sequence" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NOT-EXIST if credentials with the given name and category do not exist.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:EXIST if credentials with the given new name and category are already present.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:NAME if the credentials or category name is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:MONGO-DEFAULT if the specified credentials or category name correspond with the default MongoDB credentials</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:TEST if a connection cannot be established using the specified credentials</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">credentials:CREDENTIALS-STORE if an internal error arises accessing the crendentials store</xqdoc:error>" ] } ], "variables" : [  ] }