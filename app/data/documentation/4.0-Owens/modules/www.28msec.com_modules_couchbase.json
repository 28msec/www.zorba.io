{ "ns" : "http://www.28msec.com/modules/couchbase", "description" : " This module provides functionality to interact with the\n Couchbase NoSQL database.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n The module is built using the libcouchbase 2.0 C client library and\n exposes most of its functionality in JSONiq.\n Beyond just allowing for basic key-value store operations (e.g.\n put-/get-text or put-/get-binary, this module also allows to work\n with Couchbase views in order to allow for complex JSON query\n operations.\n", "sees" : [  ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Cristi Dumitru</xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "http://zorba.io/annotations", "prefix" : "an" }, { "uri" : "http://www.28msec.com/modules/couchbase", "prefix" : "cb" }, { "uri" : "http://zorba.io/options/versioning", "prefix" : "ver" }, { "uri" : "http://www.zorba-xquery.com/modules/couchbase", "prefix" : "zcb" } ], "functions" : [ { "isDocumented" : true, "arity" : 1, "name" : "connect", "qname" : "cb:connect", "signature" : "($options as object()) as anyURI", "description" : " Connect to the Couchbase server.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The input to the function is an object that contains the connection\n information. Specifically, it allows for the following options:\n <ul>\n   <li><tt>host</tt>: the endpoint of the Couchbase server (mandatory)</li>\n   <li><tt>user</tt>: the user used for connecting (optional)</li>\n   <li><tt>password</tt>: the password used for connecting (optional)</li>\n   <li><tt>bucket</tt>: name of an existing bucket (mandatory)</li>\n </ul></p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $conn := cb:connect({\n   \"host\" : \"192.168.1.56:8091\",\n   \"username\" : (),\n   \"password\" : (),\n   \"bucket\" : \"default\"\n });\n </pre></li></ul></p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The function returns an opaque URI that represents the connection.\n This URI has to be passed to other functions of this module that require\n the <tt>$conn</tt> parameter as a first argument.</p>\n", "summary" : "<p> Connect to the Couchbase server.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a object that contains the host, bucket, and authentication information.</div>" } ], "returns" : { "type" : "anyURI", "description" : "an identifier for the established connection." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0001 if the connection to the given host/bucket could not be established.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0001 if mandatory connection information is missing.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0007 if a given option is not supported.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "connect", "qname" : "cb:connect", "signature" : "($host as string, $username as string?, $password as string?, $bucket as string) as anyURI", "description" : " Connect to the Couchbase server.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The function returns an opaque URI that represents the connection.\n This URI has to be passed to other functions of this module that require\n the <tt>$conn</tt> parameter as a first argument.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $conn := cb:connect(\"192.168.1.56:8091\", (), (), \"default\");\n </pre></li></ul></p>\n", "summary" : "<p> Connect to the Couchbase server.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> address of the couchbase server (mandatory) <code>\"192.168.1.56:8091\"</code></div>" }, { "name" : "username", "type" : "string", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> username used for the connection</div>" }, { "name" : "password", "type" : "string", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> password used for the connection</div>" }, { "name" : "bucket", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> name of the bucket to use (mandatory) <code>\"default\"</code></div>" } ], "returns" : { "type" : "anyURI", "description" : "an identifier that represents the connection to the server." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0001 if the connection to the given host/bucket could not be established.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "create-view", "qname" : "cb:create-view", "signature" : "($conn as anyURI, $doc-name as string, $view-names as string*) as string*", "description" : " Create a document and views.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n If the document already exists, it is replaced.\n A document can hold several views that must be specified in the same call.\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $views := cb:create-view($conn, \"zip\", (\"bystate\", \"bycity\"));\n </pre></li></ul></p>\n", "summary" : "<p> Create a document and views.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "doc-name", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The name of the document to create</div>" }, { "name" : "view-names", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The names of the views to create in the document</div>" } ], "returns" : { "type" : "string*", "description" : "The paths for the views that have been created." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "create-view", "qname" : "cb:create-view", "signature" : "($conn as anyURI, $doc-name as string, $view-names as string*, $options as object()*) as string*", "description" : " Create a document and views.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n If the document already exists, it is replaced.\n A document can hold several views that must be specified in the same call.\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">In addition, the function allows to specify several options:\n <ul>\n   <li><tt>key</tt>: <tt>string</tt> name of the value that will be used\n        as key in the view</li>\n   <li><tt>values</tt>: <tt>string/array</tt> name of the value(s) that\n        will be used as values in the view</li>\n   <li><tt>function</tt>: <tt>javascript function</tt> the map function\n        that will create the connection between key and value.<br/>\n        If <tt>function</tt> is specified, the <tt>key</tt> and\n        <tt>values</tt> options are ignored.</li>\n </ul></p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $views := cb:create-view($conn, \"zip\", \"bystate\", { \"key\": \"doc.state\", \"values\" : [\"doc.pop\", \"doc.city\"] });\n </pre></li>\n <li><pre>\n $views := cb:create-view($conn, \"zip\", \"bycity\", { \"function\": \"function(doc, meta) {  emit(doc.state, null); }\"});\n </pre></li></ul></p>\n", "summary" : "<p> Create a document and views.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "doc-name", "type" : "string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The name of the document to create</div>" }, { "name" : "view-names", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The names of the views to create in the document</div>" }, { "name" : "options", "type" : "object()", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object with additional options</div>" } ], "returns" : { "type" : "string*", "description" : "The paths for the views that have been created." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0005 if the number of options doesn't match the number of view-names.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0007 if any of the options is not supported.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0010 if any of the given options has an invalid type.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "delete-view", "qname" : "cb:delete-view", "signature" : "($conn as anyURI, $doc as string*) as string*", "description" : " Delete a document and its views.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n If the document doesn't exists, the function does nothing.\n All the views hold in the document are deleted.\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n cb:delete-view($conn, \"zip\");\n </pre></li></ul></p>\n", "summary" : "<p> Delete a document and its views.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "doc", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">-name The name of the document to delete</div>" } ], "returns" : { "type" : "string*", "description" : "a empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "flush", "qname" : "cb:flush", "signature" : "($conn as anyURI) as empty-sequence()", "description" : " Remove all values and their keys.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n cb:flush($conn);\n </pre></li></ul></p>\n", "summary" : "<p> Remove all values and their keys.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "a empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "get-binary", "qname" : "cb:get-binary", "signature" : "($conn as anyURI, $key as string*) as base64Binary*", "description" : " Retrieve the values matching the given string keys, as base64Binary.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $result := cb:get-binary($conn, \"image\");\n </pre></li></ul></p>\n", "summary" : "<p> Retrieve the values matching the given string keys, as base64Binary.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The requested keys</div>" } ], "returns" : { "type" : "base64Binary*", "description" : "A sequence of base64Binary values corresponding to the keys" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "get-binary", "qname" : "cb:get-binary", "signature" : "($conn as anyURI, $key as string*, $options as object()) as base64Binary*", "description" : " Retrieve the values matching the given string keys, as base64Binary.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">In addition, the function allows to specify several options:\n <ul>\n   <li><tt>expiration-time</tt>: <tt>integer</tt> value for refreshing the\n        expiration time in seconds\n       (default 0, which means values are kept indefinitely)</li>\n </ul></p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $result := cb:get-binary($conn, \"image\",{ \"expiration-time\" : 60 * 60 });\n </pre></li></ul></p>\n", "summary" : "<p> Retrieve the values matching the given string keys, as base64Binary.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The requested keys</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object with additional options</div>" } ], "returns" : { "type" : "base64Binary*", "description" : "A sequence of base64Binary values corresponding to the keys" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0007 if any of the options is not supported.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0009 if the given expiration time is not an integer.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "get-text", "qname" : "cb:get-text", "signature" : "($conn as anyURI, $key as string*) as string*", "description" : " Retrieve the values matching the given string keys, as string.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $result := cb:get-text($conn, \"35040\");\n </pre></li></ul></p>\n", "summary" : "<p> Retrieve the values matching the given string keys, as string.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The requested keys</div>" } ], "returns" : { "type" : "string*", "description" : "A sequence of string values corresponding to the keys" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "get-text", "qname" : "cb:get-text", "signature" : "($conn as anyURI, $key as string*, $options as object()) as string*", "description" : " Retrieve the values matching the given string keys, as string.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">In addition, the function allows to specify several options:\n <ul>\n   <li><tt>expiration-time</tt>: <tt>integer</tt> value for refreshing the\n        expiration time in seconds\n       (default 0, which means values are kept indefinitely)</li>\n   <li><tt>encoding</tt>: <tt>string</tt> name of the encoding of the\n        returned string (default UTF-8)</li>\n </ul></p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $result := cb:get-text($conn, \"35040\", { \"encoding\" : \"ASCII\" } );\n </pre></li></ul></p>\n", "summary" : "<p> Retrieve the values matching the given string keys, as string.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The requested key</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object with additional options</div>" } ], "returns" : { "type" : "string*", "description" : "A sequence of string values corresponding to the keys" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0006 if the given encoding is not supported.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0007 if any of the options is not supported.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0009 if the given expiration time is not an integer.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "put-binary", "qname" : "cb:put-binary", "signature" : "($conn as anyURI, $key as string*, $value as base64Binary*) as empty-sequence()", "description" : " Store base64binary values along with their string keys.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n cb:put-binary($conn, \"image\",\n   http:get-binary(\"http://localhost:8091/images/couchbase_logo.png\")[2]);\n </pre></li></ul></p>\n", "summary" : "<p> Store base64binary values along with their string keys.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The keys to store</div>" }, { "name" : "value", "type" : "base64Binary", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The base64 binary values to be stored</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "a empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0005 if the number of keys doesn't match the number of values.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "put-binary", "qname" : "cb:put-binary", "signature" : "($conn as anyURI, $key as string*, $value as base64Binary*, $options as object()) as empty-sequence()", "description" : " Store base64Binary values along with their string keys.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">In addition, the function allows to specify several options:\n <ul>\n   <li><tt>expiration-time</tt>: <tt>integer</tt> value for refreshing the\n        expiration time in seconds\n       (default 0, which means values are kept indefinitely)</li>\n   <li><tt>operation</tt>: <tt>add/replace/set/append/prepend</tt> type of\n       operation</li>\n   <li><tt>wait</tt>: <tt>persist/false</tt> if the system should wait for\n        persistence of the keys</li>\n </ul></p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n cb:put-binary($conn, \"image\",\n   http:get-binary(\"http://localhost:8091/images/couchbase_logo.png\")[2],\n   { \"expiration-time\" : 60 * 60 * 24 });\n </pre></li></ul></p>\n", "summary" : "<p> Store base64Binary values along with their string keys.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The keys to store</div>" }, { "name" : "value", "type" : "base64Binary", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The base64Binary values to be stored</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object with additional options</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "a empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0005 if the number of keys doesn't match the number of values.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0007 if any of the options is not supported.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0009 if the given expiration time is not an integer.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0011 if the stored Variable was not stored</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "put-text", "qname" : "cb:put-text", "signature" : "($conn as anyURI, $key as string*, $value as string*) as empty-sequence()", "description" : " Store string values along with their string keys.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n The values are stored with the UTF-8 encoding and a default\n expiration time 0.\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n cb:put-text($conn, \"35040\", fn:serialize({\n                      \"city\" : \"CALERA\",\n                      \"loc\" : [ -86.755987, 33.1098 ],\n                      \"pop\" : 4675,\n                      \"state\" : \"AL\",\n                      \"_id\" : \"35040\"\n                    }));\n </pre></li></ul></p>\n", "summary" : "<p> Store string values along with their string keys.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The keys to store</div>" }, { "name" : "value", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The string values to be stored.</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "a empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0005 if the number of keys doesn't match the number of values.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "put-text", "qname" : "cb:put-text", "signature" : "($conn as anyURI, $key as string*, $value as string*, $options as object()) as empty-sequence()", "description" : " Store string values along with their string keys.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">In addition, the function allows to specify several options:\n <ul>\n   <li><tt>expiration-time</tt>: <tt>integer</tt> value for refreshing the\n        expiration time in seconds\n       (default 0, which means values are kept indefinitely)</li>\n   <li><tt>encoding</tt>: <tt>string</tt> name of the encoding of the\n        returned string (default UTF-8)</li>\n   <li><tt>operation</tt>: <tt>add/replace/set/append/prepend</tt> type\n        of operation</li>\n   <li><tt>wait</tt>: <tt>persist/false</tt> if the system should wait for\n        persistence of the keys</li>\n </ul></p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n cb:put-text($conn, \"35040\", fn:serialize({\n                      \"city\" : \"CALERA\",\n                      \"loc\" : [ -86.755987, 33.1098 ],\n                      \"pop\" : 4675,\n                      \"state\" : \"AL\",\n                      \"_id\" : \"35040\"\n                    }), { \"expiration-time\" : 60 * 60 * 24 });\n </pre></li></ul></p>\n", "summary" : "<p> Store string values along with their string keys.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The keys to store</div>" }, { "name" : "value", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The string values to be stored</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object with additional options</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "a empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0005 if the number of keys doesn't match the number of values.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0006 if the given encoding is not supported.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0007 if any of the options is not supported.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0009 if the given expiration time is not an integer.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0011 if the stored Variable was not stored</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "remove", "qname" : "cb:remove", "signature" : "($conn as anyURI, $key as string*) as empty-sequence()", "description" : " Remove the values matching the given string keys.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n cb:remove($conn, \"35040\");\n </pre></li></ul></p>\n", "summary" : "<p> Remove the values matching the given string keys.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The requested keys to have their values removed</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "a empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "touch", "qname" : "cb:touch", "signature" : "($conn as anyURI, $key as string*, $exp-time as integer) as empty-sequence()", "description" : " Refresh the expiration time of the given string keys.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n cb:touch($conn, \"35040\", 60 * 60 * 24);\n </pre></li></ul></p>\n", "summary" : "<p> Refresh the expiration time of the given string keys.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "key", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The keys to touch</div>" }, { "name" : "exp-time", "type" : "integer", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> New expiration time in seconds</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "a empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "view", "qname" : "cb:view", "signature" : "($conn as anyURI, $path as string*) as object()*", "description" : " Retrieve the content of existing views. <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $results := cb:view($conn, \"_design/zip/_view/bystate\");\n </pre></li></ul></p>\n", "summary" : "<p> Retrieve the content of existing views.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "path", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The view path</div>" } ], "returns" : { "type" : "object()*", "description" : "information about the view" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "view", "qname" : "cb:view", "signature" : "($conn as anyURI, $path as string*, $options as object()) as object()*", "description" : " Retrieve the content of existing views.<p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"/>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Example:\n <ul><li><pre>\n $results := cb:view($conn, \"_design/zip/_view/bystate\", { \"limit\": 100 });\n </pre></li></ul></p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">In addition, the function allows to specify several options:\n <ul>\n   <li><tt>encoding</tt>: <tt>string</tt> name of the encoding of the\n        returned string (default UTF-8)</li>\n   <li><tt>stale</tt>: if the system should wait for persistence of the keys\n    <ul>\n      <li><tt>ok</tt> the view is not updated</li>\n      <li><tt>false</tt> the view is updated before the function view is\n      executed, this options needs the key to be on disk before the call of\n      the function.</li>\n      <li><tt>update_after</tt> the view is updated after the call\n      of the function.</li>\n    </ul></li>\n   <li><tt>limit</tt>: <tt>integer</tt> how many rows qill be shown\n         (default all)</li>\n </ul></p>\n", "summary" : "<p> Retrieve the content of existing views.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "conn", "type" : "anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The identifier of the active connection</div>" }, { "name" : "path", "type" : "string", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The view path <code>\"_design/test/_view/vies\"</code></div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object with additional options</div>" } ], "returns" : { "type" : "object()*", "description" : "information about the view" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">LCB0002 if any error occurs in the communication with the server.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">CB0007 if any of the options is not supported.</xqdoc:error>" ] } ], "variables" : [  ] }