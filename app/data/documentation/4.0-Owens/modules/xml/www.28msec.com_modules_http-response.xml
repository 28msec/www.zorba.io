<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2015-02-17T14:42:36.342765+02:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>http-response</xqdoc:name><xqdoc:comment><xqdoc:description> The response module can be used to modify the HTTP response
 that will be send as a result. For example, the
 <tt>content-type</tt> function can be used to set the
 Content-Type header and determine the encoding of data in the
 response.
</xqdoc:description><xqdoc:author>Matthias Brantner</xqdoc:author><xqdoc:custom tag="language">xquery</xqdoc:custom><xqdoc:custom tag="version">3.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="an" uri="http://zorba.io/annotations" isSchema="false"/><xqdoc:namespace prefix="http" uri="http://www.28msec.com/modules/http-response" isSchema="false"/><xqdoc:namespace prefix="output" uri="http://www.w3.org/2010/xslt-xquery-serialization" isSchema="true"/><xqdoc:namespace prefix="res" uri="http://www.28msec.com/modules/http/response#2.0" isSchema="false"/><xqdoc:namespace prefix="resp" uri="http://www.28msec.com/modules/http-response" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://zorba.io/options/versioning" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports><xqdoc:import type="schema"><xqdoc:uri>http://www.w3.org/2010/xslt-xquery-serialization</xqdoc:uri></xqdoc:import><xqdoc:import type="library"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri></xqdoc:import></xqdoc:imports><xqdoc:variables><xqdoc:variable><xqdoc:uri>http:continue</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 100 Continue
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:switching-protocols</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 101 Switching Protocols
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:processing</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 102 Processing (Web; RFC 2518)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:ok</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 200 OK
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:created</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 201 Created
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:accepted</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 202 Accepted
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:non-authoritative</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 203 Non-Authoritative
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:no-content</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 204 No Content
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:reset-content</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 205 Reset Content
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:partial-content</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 206 Partial Content
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:multi-status</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 207 Multi-Status (WebDAV; RFC 5842)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:already-reported</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 208 Already Reported (WebDAV; RFC 5842)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:im-used</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 226 IM Used (RFC 3229)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:multiple-choices</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 300 Multiple Choices
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:moved-permanently</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 301 Moved Permantently
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:found</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 302 Found
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:see-other</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 303 See Other
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:not-modified</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 304 Not Modified
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:use-proxy</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 305 Use Proxy
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:switch-proxy</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 306 Switch Proxy
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:temporary-redirect</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 307 Temporary Redirect
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:permanent-redirect</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 308 Permanent Redirect (http://tools.ietf.org/html/draft-reschke-http-status-308-07)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:bad-request</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 400 Bad Request
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:unauthorized</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 401 Unauthorized
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:payment-required</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 402 Payment Required
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:forbidden</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 403 Forbidden
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:not-found</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 404 Not Found
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:not-allowed</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 405 Not Allowed
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:not-acceptable</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 406 Not Acceptable
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:proxy-authentication-required</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 407 Proxy Authentication Required
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:request-timeout</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 408 Request Timeout
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:conflict</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 409 Conflict
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:gone</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 410 GONE
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:length-required</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 411 Length Required
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:precondition-failed</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 412 Precondition Failed
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:request-entity-too-large</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 413 Request Entity Too Large
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:request-entity-too-long</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 414 Request Entity Too Long
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:unsupported-media-type</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 415 Unsupported Media Type
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:request-range-not-satisfiable</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 416 Request Range Not Satisfiable
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:expectation-failed</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 417 Expectation Failed
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:im-a-teapot</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 418 I'm a teapot (RFC 2324)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:enhance-your-calm</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 420 Enhance Your Calm
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:unprocessable-entity</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 422 Unprocessable Entity (WebDAV; RFC 4918)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:locked</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 423 Locked (WebDAV; RFC 4918)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:failed-dependency</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 424 Failed Dependency (WebDAV; RFC 4918)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:unordered-collection</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 425 Unordered Collection
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:upgrade-required</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 426 Upgrade Required
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:precondition-required</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 428 Precondition Required (RFC 6585)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:too-many-requests</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 429 Too Many Requests (RFC 6585)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:request-header-fields-too-large</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 431 Request Header Fields Too Large (RFC 6585)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:internal-server-error</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 500 Internal Server Error
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:not-implemented</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 501 Not Implemented
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:bad-gateway</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 502 Bad Gateway
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:service-unavailable</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 503 Service Unavailable
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:gateway-timeout</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 504 Gateway Timeout
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:http-version-not-supported</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 505 HTTP Version Not Supported
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:variant-also-negotiates</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 506 Variant Also Negotiates (RFC 2295)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:insufficient-storage</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP Status Code 507 Insufficient Storage (WebDAV; RFC 4918)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:loop-detected</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP status code 508 Loop Detected (webdav; rfc 5842)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:not-extended</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP status code 510 Not Extended (RFC 2774)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>http:network-authentication-required</xqdoc:uri><xqdoc:comment><xqdoc:description> A string representing the HTTP status code 511 Network Authentication Required (RFC 6585)
</xqdoc:description></xqdoc:comment></xqdoc:variable><xqdoc:variable><xqdoc:uri>resp:status-info</xqdoc:uri><xqdoc:comment><xqdoc:description> Variable containing a description for all the HTTP Status Codes
</xqdoc:description><xqdoc:custom tag="type">object()</xqdoc:custom></xqdoc:comment></xqdoc:variable></xqdoc:variables><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Set a HTTP header in the response.</p>
 <p>If a header with the same name was already set, the
 value is overwritten and the function returns the old value. As defined
 in the HTTP specification, multiple headers with the same name
 can be combined into one header whose value is a comma-separated
 list of the values.</p>
 <p>The following headers must not be set using this function.
 Instead, other functions of this module should be used in order
 to implemented the required semantics:
 <ul>
   <li>Status: use status() instead</li>
   <li>Content-Type: use content-type() instead</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$name the name of the header to set</xqdoc:param><xqdoc:param>$value the value of the header to set `</xqdoc:param><xqdoc:return>the value of the header previously set or the empty sequence if no header has been set with the same name.</xqdoc:return><xqdoc:error>resp:invalid-header-name if an invalid name is used for the header.</xqdoc:error></xqdoc:comment><xqdoc:name>resp:header</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:header($name as xs:string, $value as xs:string) as xs:string?</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>name</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>value</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type occurrence="?">xs:string?</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>set-header</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>lower-case</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Sets the status code of the HTTP response to code associated
 with the given string.</p>
 <p>For example,
 <tt>resp:status($http:no-content)</tt>
 will result in "HTTP/1.1 204 No Content".</p>
</xqdoc:description><xqdoc:param>$status The status code of the HTTP response as a string (e.g. $http:no-content)</xqdoc:param><xqdoc:return>On success, the empty-sequence is returned</xqdoc:return><xqdoc:error>http:invalid-status if the given string does not represent a valid HTTP status code;</xqdoc:error></xqdoc:comment><xqdoc:name>resp:status</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:status($status as xs:string) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>status</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>code-for-status</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>status-code</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Sets the status code of the HTTP response to the integer given as
 parameter.</p>
 For example,
 <tt>resp:status(204)</tt>
 will result in "HTTP/1.1 204 No Content".
</xqdoc:description><xqdoc:param>$status The status code of the HTTP response as integer.</xqdoc:param><xqdoc:return>On success, the empty-sequence is returned</xqdoc:return><xqdoc:error>http:invalid-status-code if the given integer does not reflect a valid HTTP status code</xqdoc:error></xqdoc:comment><xqdoc:name>resp:status-code</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:status-code($status as xs:integer) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>status</xqdoc:name><xqdoc:type>xs:integer</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>set-status-code</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Sets the Content-Type header for the response.</p>
 <p>
 For example,
 <tt>resp:content-type("text/plain")</tt> will cause the
 header
 <tt>Content-Type: text/plain</tt> to be added for the response.</p>
 <p>In addtion to setting the Content-Type header, the function also
 sets the serialization parameters to the default values for serialization
 method for the given content-type. For example, if the content-type is set to
 text/plain, the default serialization parameters for the text
 serialization method will be used.</p>
 <p>The functions resp:content-type-text/xml/html/xhtml/binary may be used
 to figure out which serialization method will be used for a specific
 content-type.</p>
 <p>If the given content-type contains a charset declaration (e.g.
 <tt>resp:content-type("text/plain;charset=ISO-8859-1")</tt>), the
 content of the response will be transcoded to the given encoding.</p>
 <p>The default serialization parameters set by this function can
 be overwritten using the resp:serialization-parameters() function.</p>
</xqdoc:description><xqdoc:param>$type the content-type to be set</xqdoc:param><xqdoc:return>the function is sequential and returns the empty sequence</xqdoc:return><xqdoc:error>http:invalid-encoding if the given encoding is invalid or not supported.</xqdoc:error></xqdoc:comment><xqdoc:name>resp:content-type</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:content-type($type as xs:string) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>type</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>content-type</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>content-type-html</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>content-type-json</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>content-type-mixed-json-xml</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>content-type-xhtml</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>content-type-xml</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>serializer-defaults-html</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>serializer-defaults-json</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>serializer-defaults-json-xml-hybrid</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>serializer-defaults-text</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>serializer-defaults-xhtml</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>serializer-defaults-xml</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Sets the Content-Type header for the response.</p>
 <p>For example,
 <tt>resp:content-type("text/plain")</tt> will cause the
 header
 <tt>Content-Type: text/plain</tt> to be added for the response.</p>
 <p>In addition to the content-type, the function also allows to
 specify the serialization method and parameters that will be used
 for serializing the result. For details about this parameter, please
 refer to resp:serialization-parameters#1.</p>
 <p>If the content-type suggest using a binary serialization,
 resp:decode-binary#1 will be called and set to true except if
 the serialization method is specified at the same time. In this
 case, the serialization method will be used as specified.</p>
 <p>If the given content-type contains a charset declaration (e.g.
 <tt>resp:content-type("text/plain;charset=ISO-8859-1")</tt>), the
 content of the response will be transcoded to the given encoding.
 If the serialization parameters also contain a charset declaration,
 the charset contained in the content-type will be used. to transcode
 the result.</p>
</xqdoc:description><xqdoc:param>$type the content-type to be set</xqdoc:param><xqdoc:param>$params the serialization parameters that will be used for serialization the result.</xqdoc:param><xqdoc:return>the function is sequential and returns the empty sequence</xqdoc:return><xqdoc:error>http:invalid-encoding if the given encoding is invalid or not supported.</xqdoc:error></xqdoc:comment><xqdoc:name>resp:content-type</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:content-type($type as xs:string, $params as object()) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>type</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>params</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>content-type-binary</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>decode-binary</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>serialization-parameters</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>set-header-impl</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>exists</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>true</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>The function sets the output encoding that will be
 used for the payload of the response.</p>
 <p>For example,
 <tt>resp:encoding("ISO-8859-1")</tt> will cause the
 content in the response to be encoded using ISO-8859-1.</p>
 <p>Please note that the encoding only applies to textual data.
 It is not used if the function <tt>decode-binary()</tt>
 was invoked passing true as parameter.</p>
</xqdoc:description><xqdoc:param>$encoding the encoding to be used for the payload of the response.</xqdoc:param><xqdoc:return>the function is sequential and returns the empty sequence</xqdoc:return><xqdoc:error>http:invalid-encoding if the given encoding is invalid or not supported.</xqdoc:error></xqdoc:comment><xqdoc:name>resp:encoding</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:encoding($encoding as xs:string) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>encoding</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>set-encoding</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>Returns an object that can be used to specify the
 settings of serialization parameters for the XML serialization
 method.</p>
 <p>The defaults are
 <pre>
 {
  "method" : "xml",
  "encoding" : "UTF-8",
  "indent" : true,
  "omit-xml-declaration" : true,
  "version" : "1.0"
 }
 </pre>
 </p>
 <p>For example, those defaults are used when setting
 the content-type to some XML content-type (e.g. application/atom+xml).</p>
</xqdoc:description><xqdoc:return>an object that can be used to specify the above serialization parameters.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:serializer-defaults-xml</xqdoc:name><xqdoc:signature>declare function resp:serializer-defaults-xml() as object()</xqdoc:signature><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>true</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>Returns an object that can be used to specify the
 settings of serialization parameters for the text serialization
 method.</p>
 <p>The only default used is
 <pre>
 {
  "method" : "text",
  "encoding" : "UTF-8",
 }
 </pre>
 </p>
 <p>For example, this default is used when setting
 the content-type to some text content-type (e.g. text/plain).</p>
</xqdoc:description><xqdoc:return>an object that can be used to specify the above serialization parameters.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:serializer-defaults-text</xqdoc:name><xqdoc:signature>declare function resp:serializer-defaults-text() as object()</xqdoc:signature><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>Returns an object that can be used to specify the
 settings of serialization parameters for the XHTML serialization
 method.</p>
 <p>The defaults are
 <pre>
 {
   "encoding" : "UTF-8",
   "indent" : true,
   "method" : "xhtml",
   "omit-xml-declaration" : true,
   "version" : "1.0",
   "doctype-system" : "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd",
   "doctype-public" : "-//W3C//DTD XHTML 1.0 Transitional//EN"
 }
 </pre>
 </p>
 <p>For example, those defaults are used when setting
 the content-type to some XHTML content-type (i.e. application/xhtml+xml).</p>
</xqdoc:description><xqdoc:return>an object that can be used to specify the above serialization parameters.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:serializer-defaults-xhtml</xqdoc:name><xqdoc:signature>declare function resp:serializer-defaults-xhtml() as object()</xqdoc:signature><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>true</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>Returns an object that can be used to specify the
 settings of serialization parameters for the HTML serialization
 method.</p>
 <p>The defaults are
 <pre>
 {
   "encoding" : "UTF-8",
   "indent" : true,
   "method" : "html",
   "omit-xml-declaration" : true(),
   "version" : "4.01",
   "doctype-system" : "http://www.w3.org/TR/html4/loose.dtd",
   "doctype-public" : "-//W3C//DTD HTML 4.01 Transitional//EN"
 }
 </pre>
 </p>
 <p>For example, those defaults are used when setting
 the content-type to some HTML content-type (i.e. text/html).</p>
</xqdoc:description><xqdoc:return>an object that can be used to specify the above serialization parameters.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:serializer-defaults-html</xqdoc:name><xqdoc:signature>declare function resp:serializer-defaults-html() as object()</xqdoc:signature><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>true</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>Returns an object that can be used to specify the
 settings of serialization parameters for the json
 serialization method.</p>
 <p>The defaults are
 <pre>
 {
   "encoding" : "UTF-8",
   "indent" : "yes",
   "omit-xml-declaration" : true(),
   "method" : "json"
 }
 </pre>
 </p>
 <p>For example, those defaults are used when setting
 the content-type to some XML content-type (e.g. application/atom+xml).</p>
</xqdoc:description><xqdoc:return>an object that can be used to specify the above serialization parameters.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:serializer-defaults-json-xml-hybrid</xqdoc:name><xqdoc:signature>declare function resp:serializer-defaults-json-xml-hybrid() as object()</xqdoc:signature><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>true</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>Returns an object that can be used to specify the
 settings of serialization parameters for the json-xml hybrid
 serialization method.</p>
 <p>The defaults are
 <pre>
 {
   "encoding" : "UTF-8",
   "indent" : "yes",
   "method" : "json"
 }
 </pre>
 </p>
 <p>For example, those defaults are used when setting
 the content-type to application/mixed-json-xml.</p>
</xqdoc:description><xqdoc:return>an object that can be used to specify the above serialization parameters.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:serializer-defaults-json</xqdoc:name><xqdoc:signature>declare function resp:serializer-defaults-json() as object()</xqdoc:signature><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Test if a given content-type is a text content-type.</p>
 <p>A text content-type starts with "text/" or contains either of
 the strings "xml" or "json".</p>
</xqdoc:description><xqdoc:param>$type the content-type to test.</xqdoc:param><xqdoc:return>true if the given content-type is a text content-type, false otherwise.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:content-type-text</xqdoc:name><xqdoc:signature>declare function resp:content-type-text($type as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>type</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>content-type-text</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Test if a given content-type is a XML content-type</p>
 <p>A XML content-type is a content-type that is "application/xml"
 or ends : with the string "+xml".</p>
</xqdoc:description><xqdoc:param>$type the content-type to test.</xqdoc:param><xqdoc:return>true if the given content-type is a XML content-type, false otherwise.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:content-type-xml</xqdoc:name><xqdoc:signature>declare function resp:content-type-xml($type as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>type</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>content-type-xml</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Test if a given content-type is a HTML content-type, i.e.
 the content-type is the string "text/html".</p>
</xqdoc:description><xqdoc:param>$type the content-type to test.</xqdoc:param><xqdoc:return>true if the given content-type is the HTML content-type, false otherwise.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:content-type-html</xqdoc:name><xqdoc:signature>declare function resp:content-type-html($type as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>type</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>content-type-html</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Test if a given content-type is a XHTML content-type, i.e.
 the content-type is the string "application/xhtml+xml".</p>
</xqdoc:description><xqdoc:param>$type the content-type to test.</xqdoc:param><xqdoc:return>true if the given content-type is the XHTML content-type, false otherwise.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:content-type-xhtml</xqdoc:name><xqdoc:signature>declare function resp:content-type-xhtml($type as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>type</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>content-type-xhtml</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Test if a given content-type is a mixed JSON-XML content-type, i.e.
 the content-type is the string "application/mixed-json-xml".</p>
</xqdoc:description><xqdoc:param>$type the content-type to test.</xqdoc:param><xqdoc:return>true if the given content-type is a mixed JSON-XML content-type, false otherwise.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:content-type-mixed-json-xml</xqdoc:name><xqdoc:signature>declare function resp:content-type-mixed-json-xml($type as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>type</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>content-type-mixed-json-xml</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Test if a given content-type is a JSON content-type, i.e.
 the content-type is the string "application/json".</p>
</xqdoc:description><xqdoc:param>$type the content-type to test.</xqdoc:param><xqdoc:return>true if the given content-type is the JSON content-type, false otherwise.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:content-type-json</xqdoc:name><xqdoc:signature>declare function resp:content-type-json($type as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>type</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>content-type-json</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Test if a given content-type is a binary content-type. A
 content-type is considered to be binary if it's not a text
 content-type.</p>
</xqdoc:description><xqdoc:param>$type the content-type to test.</xqdoc:param><xqdoc:return>true if the given content-type is a binary content-type, false otherwise.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:content-type-binary</xqdoc:name><xqdoc:signature>declare function resp:content-type-binary($type as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>type</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>content-type-binary</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Set the serialization parameters used for serializing the result
 of the request.</p>
 <p>The following example shows how to set several options
 for the JSON serialization method.
 <pre>
 {
   "method" : "json",
   "indent" : false,
   "encoding" : "UTF-16"
 }
 </pre>
 </p>
 <p>Please note that serialization options set by this function can
 be overwritten by a subsequent call to resp:content-type. In this
 case, the options will be reset to the default for the given
 content-type. Also note, that the output encoding can be overwritten
 by subsequently calling the resp:encoding function.</p>
</xqdoc:description><xqdoc:param>$params the serialization parameters that will be used to serialize the result of the request</xqdoc:param><xqdoc:return>the function is sequential and, on success, returns the empty sequence.</xqdoc:return><xqdoc:error>err:XQDY0027 if the input is not valid</xqdoc:error><xqdoc:error>http:invalid-encoding if the encoding specified in the serialization options is invalid or not supported.</xqdoc:error></xqdoc:comment><xqdoc:name>resp:serialization-parameters</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:serialization-parameters($params as object()) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>params</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>encoding</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>set-serialization-parameters</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>exists</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-join</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri></xqdoc:uri><xqdoc:name>keys</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>Returns the serialization parameters that are currently
 active, i.e. the ones that will be used to serialize the result
 of this request.</p>
 <p>This will either be the default, the defaults set when
 calling resp:content-type(), or the ones set by
 resp:serialization-parameters().</p>
</xqdoc:description><xqdoc:return>the said serialization parameters</xqdoc:return></xqdoc:comment><xqdoc:name>resp:serialization-parameters</xqdoc:name><xqdoc:signature>declare function resp:serialization-parameters() as object()</xqdoc:signature><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>serialization-parameters</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>serializer-defaults-xml</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>false</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>local-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>tokenize</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>true</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>If this function is invoked with true, the result of the request
 will not be serialized. Instead, the result will be the binary values
 of any item that is of type base64Binary. The values of all other
 items will not be part of the result.</p>
 <p>Please note that all serialization parameters which have been set using
 resp:serialization-parameters will be ignored. Also, the output encoding
 is ignored for binaries.</p>
</xqdoc:description><xqdoc:param>$decode boolean value indicating whether base64Binary should be decoded.</xqdoc:param><xqdoc:return>the function is sequential and returns the empty sequence.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:decode-binary</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:decode-binary($decode as xs:boolean) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>decode</xqdoc:name><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>set-decode-binary</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>Returns the boolean indiciating whether base64Binary returned by
 this request will be decoded.</p>
 <p>The default if not modified using resp:decode-binary is false.</p>
</xqdoc:description><xqdoc:return>the said boolean value</xqdoc:return></xqdoc:comment><xqdoc:name>resp:decode-binary</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:decode-binary() as xs:boolean</xqdoc:signature><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/http/response#2.0</xqdoc:uri><xqdoc:name>decode-binary</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> This function sets the HTTP 302 redirect status code in the response. As
 a result, a redirect to the URL given as parameter will be made.
</xqdoc:description><xqdoc:param>$url The URL to which the redirect will be made.</xqdoc:param><xqdoc:return>The empty-sequence is returned.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:redirect</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function resp:redirect($url as xs:string) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>url</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>header</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/http-response</xqdoc:uri><xqdoc:name>status</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Convert between the name of the HTTP status code and
 the integer value of that status code.
</xqdoc:description><xqdoc:param>$code the name of the status code</xqdoc:param><xqdoc:return>the integer value of the given status code.</xqdoc:return><xqdoc:error>http:invalid-status if the given name does not represent a valid http status code</xqdoc:error></xqdoc:comment><xqdoc:name>resp:code-for-status</xqdoc:name><xqdoc:signature>declare function resp:code-for-status($status as xs:string) as xs:integer</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>status</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:integer</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>concat</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>exists</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Convert between the HTTP status code as string and
 the name/message of that status code.
</xqdoc:description><xqdoc:param>$code the name of the status code</xqdoc:param><xqdoc:return>the message for the given name</xqdoc:return><xqdoc:error>http:invalid-status if the given name does not represent a valid http status code</xqdoc:error></xqdoc:comment><xqdoc:name>resp:message-for-status</xqdoc:name><xqdoc:signature>declare function resp:message-for-status($status as xs:string) as xs:string</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>status</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>concat</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Test whether the given name refers to a valid HTTP status code.
</xqdoc:description><xqdoc:param>$error the name to test</xqdoc:param><xqdoc:return>true if the given name refers to a valid HTTP status code, false otherwise.</xqdoc:return></xqdoc:comment><xqdoc:name>resp:valid-status</xqdoc:name><xqdoc:signature>declare function resp:valid-status($status as xs:string) as xs:boolean</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>status</xqdoc:name><xqdoc:type>xs:string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:boolean</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>exists</xqdoc:name></xqdoc:invoked></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>