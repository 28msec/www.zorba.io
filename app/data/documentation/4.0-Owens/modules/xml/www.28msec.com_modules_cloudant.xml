<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2015-02-17T14:42:36.342765+02:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>cloudant</xqdoc:name><xqdoc:comment><xqdoc:description> <p>This module provides functionality for creating, reading, updating,
 deleting and searching data in <a href="https://cloudant.com/">Cloudant</a>
 databases.</p>
 <p>Before issuing a request to Cloudant it is mandatory to create
 a new connection through one of the <code>connect</code> functions.
 These functions return a connection identifier which needs to be used
 to access data in Cloudant through the other functions.</p>
 <p>In these functions Cloudant databases will be identified through
 their names. By default, the functions will assume that the database is owned by
 the user for which the given connection has been created.
 To specify a different database owner, most functions accept an
 <code>$options</code> parameter that allows a <code>database-owner</code>
 option to specify a different database owner for a single request.
 Moreover, when connecting, it is possible to specify the default
 database owner using the <code>connect#3</code> function.</p>
 <p>Additional information on the Cloudant APIs can be found
 <a href="https://cloudant.com/for-developers/">on the Cloudant website</a>.</p>
 <h2 id="determinism">Important Notice Regarding Function Determinism</h2>
 <p>The non side-effecting functions:
 <ul>
   <li><a href="#list-databases-1">list-databases#1</a></li>
   <li><a href="#list-databases-2">list-databases#2</a></li>
   <li><a href="#database-info-2">database-info#2</a></li>
   <li><a href="#database-info-3">database-info#3</a></li>
   <li><a href="#all-documents-2">all-documents#2</a></li>
   <li><a href="#all-documents-3">all-documents#3</a></li>
   <li><a href="#multiple-documents-3">multiple-documents#3</a></li>
   <li><a href="#multiple-documents-4">multiple-documents#4</a></li>
   <li><a href="#document-3">document#3</a></li>
   <li><a href="#document-4">document#4</a></li>
   <li><a href="#document-info-3">document-info#3</a></li>
   <li><a href="#document-info-4">document-info#4</a></li>
   <li><a href="#attachment-4">attachment#4</a></li>
   <li><a href="#attachment-5">attachment#5</a></li>
   <li><a href="#all-view-documents-4">all-view-documents#4</a></li>
   <li><a href="#all-view-documents-5">all-view-documents#5</a></li>
   <li><a href="#multiple-view-documents-5">multiple-view-documents#5</a></li>
   <li><a href="#multiple-view-documents-6">multiple-view-documents#6</a></li>
   <li><a href="#lucene-query-5">lucene-query#5</a></li>
   <li><a href="#lucene-query-6">lucene-query#6</a></li>
 </ul>
 are declared deterministic, which means that their results could be cached
 when invoked multiple times with the same arguments in the same query execution.</p>
 <p>To not use cached results you can use the following alternative functions:
 <ul>
   <li><a href="#list-databases-nondeterministic-1">list-databases-nondeterministic#1</a></li>
   <li><a href="#list-databases-nondeterministic-2">list-databases-nondeterministic#2</a></li>
   <li><a href="#database-info-nondeterministic-2">database-info-nondeterministic#2</a></li>
   <li><a href="#database-info-nondeterministic-3">database-info-nondeterministic#3</a></li>
   <li><a href="#all-documents-nondeterministic-2">all-documents-nondeterministic#2</a></li>
   <li><a href="#all-documents-nondeterministic-3">all-documents-nondeterministic#3</a></li>
   <li><a href="#multiple-documents-nondeterministic-3">multiple-documents-nondeterministic#3</a></li>
   <li><a href="#multiple-documents-nondeterministic-4">multiple-documents-nondeterministic#4</a></li>
   <li><a href="#document-nondeterministic-3">document-nondeterministic#3</a></li>
   <li><a href="#document-nondeterministic-4">document-nondeterministic#4</a></li>
   <li><a href="#document-info-nondeterministic-3">document-info-nondeterministic#3</a></li>
   <li><a href="#document-info-nondeterministic-4">document-info-nondeterministic#4</a></li>
   <li><a href="#attachment-nondeterministic-4">attachment-nondeterministic#4</a></li>
   <li><a href="#attachment-nondeterministic-5">attachment-nondeterministic#5</a></li>
   <li><a href="#all-view-documents-nondeterministic-4">all-view-documents-nondeterministic#4</a></li>
   <li><a href="#all-view-documents-nondeterministic-5">all-view-documents-nondeterministic#5</a></li>
   <li><a href="#multiple-view-documents-nondeterministic-5">multiple-view-documents-nondeterministic#5</a></li>
   <li><a href="#multiple-view-documents-nondeterministic-6">multiple-view-documents-nondeterministic#6</a></li>
   <li><a href="#lucene-query-nondeterministic-5">lucene-query-nondeterministic#5</a></li>
   <li><a href="#lucene-query-nondeterministic-6">lucene-query-nondeterministic#6</a></li>
 </ul>
 which have been declared as being non deterministic.</p>
</xqdoc:description><xqdoc:author>Federico Cavalieri</xqdoc:author><xqdoc:custom tag="library"><a href="http://curl.haxx.se/">cURL Library</a></xqdoc:custom><xqdoc:custom tag="language">jsoniq</xqdoc:custom><xqdoc:custom tag="version">1.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="an" uri="http://zorba.io/annotations" isSchema="false"/><xqdoc:namespace prefix="cloudant" uri="http://www.28msec.com/modules/cloudant" isSchema="false"/><xqdoc:namespace prefix="credentials" uri="http://www.28msec.com/modules/credentials" isSchema="false"/><xqdoc:namespace prefix="err" uri="http://www.w3.org/2005/xqt-errors" isSchema="false"/><xqdoc:namespace prefix="http" uri="http://zorba.io/modules/http-client" isSchema="false"/><xqdoc:namespace prefix="map" uri="http://www.28msec.com/modules/maps" isSchema="false"/><xqdoc:namespace prefix="random" uri="http://zorba.io/modules/random" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://www.zorba-xquery.com/options/versioning" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports><xqdoc:import type="library"><xqdoc:uri>http://www.28msec.com/modules/credentials</xqdoc:uri></xqdoc:import><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/http-client</xqdoc:uri></xqdoc:import><xqdoc:import type="library"><xqdoc:uri>http://www.28msec.com/modules/maps</xqdoc:uri></xqdoc:import><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri></xqdoc:import></xqdoc:imports><xqdoc:variables><xqdoc:variable><xqdoc:uri>cloudant:map-name</xqdoc:uri><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations></xqdoc:variable><xqdoc:variable><xqdoc:uri>cloudant:map-type</xqdoc:uri><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations></xqdoc:variable><xqdoc:variable><xqdoc:uri>cloudant:category-name</xqdoc:uri><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations></xqdoc:variable></xqdoc:variables><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> <p>Opens a connection to Cloudant using the default credentials.</p>
 <p>The function returns an opaque URI that can represents the connection.
 This URI has to be passed to other functions of this module that require
 a <code>$connection</code> parameter as a first argument.</p>
 <p>This function requires to specify an options object.
 The following options are supported:
 <ul>
   <li>username: the username used for connecting (string, mandatory).</li>
   <li>password: the password used for connecting (string, mandatory).</li>
   <li>default-database-owner: the default database owner which will be
       used when calling the other module functions (string).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:connect()</pre>.
 </p>
</xqdoc:description><xqdoc:return>An identifier that represents the connection to the server</xqdoc:return><xqdoc:error>cloudant:CREDENTIALS Missing or invalid credentials</xqdoc:error><xqdoc:error>cloudant:AUTHORIZATION Authentication error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:connect</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:connect() as anyURI</xqdoc:signature><xqdoc:return><xqdoc:type>anyURI</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>connect</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/credentials</xqdoc:uri><xqdoc:name>credentials</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Opens a connection to Cloudant using the specified credentials.</p>
 <p>The function returns an opaque URI that can represents the connection.
 This URI has to be passed to other functions of this module that require
 a <code>$connection</code> parameter as a first argument.</p>
 <p>The $credentials parameter is used to specify the connection information.
 If a string is used, then the function will interpret it as the name of
 a credential in the Cloudant category.
 If an object is used, then the function will open a connection using it.
 The object structure is the following:
 <ul>
   <li>username: the username used for connecting (string, mandatory).</li>
   <li>password: the password used for connecting (string, mandatory).</li>
   <li>default-database-owner: the default database owner which will be
       used when calling the other module functions (string, optional).</li>
 </ul>
 </p>
 <p>For example, using stored credential:
 <pre>cloudant:connect("credentials-name")</pre>
 For example, specifying the connection information:
 <pre>cloudant:connect(
   {
     "username": "user",
     "password: "pass",
     "owner": "another-user"
   })</pre>.
 </p>
</xqdoc:description><xqdoc:param>$credentials The connection specification</xqdoc:param><xqdoc:return>An identifier that represents the connection to the server</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authentication error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:CREDENTIALS Missing or malformed credentials</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:connect</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:connect($credentials as item()) as anyURI</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>credentials</xqdoc:name><xqdoc:type>item()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>anyURI</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>mandatory-string-parameter</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>store-connection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>string-parameter</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>uri</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/credentials</xqdoc:uri><xqdoc:name>credentials</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring-before</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Returns an array containing the names of all the user's databases.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>For example,
 <pre>cloudant:list-databases($connection)</pre>.
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:return>An array of all the database names</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:list-databases</xqdoc:name><xqdoc:signature>declare function cloudant:list-databases($connection as anyURI) as array()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>array()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>list-databases</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> <p>Returns an array containing the names of all the user's databases.</p>
 <p>This function has the same semantics as
 <a href="#list-databases-1">list-databases#1</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:return>An array of all the database names</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:list-databases-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:list-databases-nondeterministic($connection as anyURI) as array()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>array()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>list-databases-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Returns an array containing the names of all the user's databases.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>database-owner: specifies the database owner (string, default: connection user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:list-databases($connection, {"database-owner" : "username"})</pre>.
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An array of all the databases names</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:list-databases</xqdoc:name><xqdoc:signature>declare function cloudant:list-databases($connection as anyURI, $options as object()) as array()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>array()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-array</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Returns an array containing the names of all the user's databases.</p>
 <p>This function has the same semantics as
 <a href="#list-databases-2">list-databases#2</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An array of all the databases names</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:list-databases-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:list-databases-nondeterministic($connection as anyURI, $options as object()) as array()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>array()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-array</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Returns information about a database.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>For example,
 <pre>cloudant:database-info($connection, "db")</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "update_seq": "0-g1AAAADneJzLYWBg...",
   "db_name": "db",
   "purge_seq": 0,
   "other": {
     "data_size": 0
   },
   "doc_del_count": 0,
   "doc_count": 0,
   "disk_size": 316,
   "disk_format_version": 5,
   "compact_running": false,
   "instance_start_time": "0"
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>compact_running: set to true if the database compaction routine is
  operating on this database.</li>
  <li>db_name: the name of the database.</li>
  <li>disk_format_version: the version of the physical format used for the data
  when it is stored on disk.</li>
  <li>disk_size: size in bytes of the data as stored on the disk. Views indexes
  are not included in the calculation.</li>
  <li>doc_count: a count of the documents in the specified database.</li>
  <li>doc_del_count: number of deleted documents.</li>
  <li>instance_start_time: always 0.</li>
  <li>purge_seq: the number of purge operations on the database.</li>
  <li>update_seq: the current number of updates to the database.</li>
  <li>other: JSON object containing a data_size field.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:return>An object describing the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:database-info</xqdoc:name><xqdoc:signature>declare function cloudant:database-info($connection as anyURI, $database as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>database-info</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Returns information about a database.</p>
 <p>This function has the same semantics as <a href="#database-info-2">database-info#2</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:return>An object describing the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:database-info-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:database-info-nondeterministic($connection as anyURI, $database as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>database-info-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Returns information about a database.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>database-owner: specifies the database owner (string, default: connection user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:database-info($connection, "db", {"database-owner": "username"})</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "update_seq": "0-g1AAAADneJzLYWBg...",
   "db_name": "db",
   "purge_seq": 0,
   "other": {
     "data_size": 0
   },
   "doc_del_count": 0,
   "doc_count": 0,
   "disk_size": 316,
   "disk_format_version": 5,
   "compact_running": false,
   "instance_start_time": "0"
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>compact_running: set to true if the database compaction routine is
  operating on this database.</li>
  <li>db_name: the name of the database.</li>
  <li>disk_format_version: the version of the physical format used for the data
  when it is stored on disk.</li>
  <li>disk_size: size in bytes of the data as stored on the disk. Views indexes
  are not included in the calculation.</li>
  <li>doc_count: a count of the documents in the specified database.</li>
  <li>doc_del_count: number of deleted documents.</li>
  <li>instance_start_time: always 0.</li>
  <li>purge_seq: the number of purge operations on the database.</li>
  <li>update_seq: the current number of updates to the database.</li>
  <li>other: JSON object containing a data_size field.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database a database name</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object describing the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:database-info</xqdoc:name><xqdoc:signature>declare function cloudant:database-info($connection as anyURI, $database as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Returns information about a database.</p>
 <p>This function has the same semantics as
 <a href="#database-info-3">database-info#3</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database a database name</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object describing the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:database-info-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:database-info-nondeterministic($connection as anyURI, $database as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Creates a new database.</p>
 <p>The database name must be composed of one or more of the following
 characters:
 <ul>
  <li>Lowercase characters (a-z).</li>
  <li>Digits (0-9).</li>
  <li>Any of the characters: _,$,(,),+,- and /.</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:create-database($connection, "db")</pre>.
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:return>Empty sequence</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:DATABASE-EXISTS Database already exists</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:create-database</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:create-database($connection as anyURI, $database as string) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Deletes a database and all the documents and attachments contained in it.</p>
 <p>The database name must be composed of one or more of the following characters:
 <ul>
  <li>Lowercase characters (a-z).</li>
  <li>Digits (0-9).</li>
  <li>Any of the characters: _,$,(,),+,- and /.</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:delete-database($connection, "db")</pre>.
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:return>Empty sequence</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:DATABASE-NOT-EXISTS Database does not exist</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:delete-database</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:delete-database($connection as anyURI, $database as string) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Lists all the documents in a given database.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>For example,
 <pre>cloudant:all-documents($connection, "db")</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "total_rows":3,
   "offset":0,
   "rows":[
   {
     "id":"5a049246-179f-42ad-87ac-8f080426c17c",
     "key":"5a049246-179f-42ad-87ac-8f080426c17c",
     "value":
     {
       "rev":"2-9d5401898196997853b5ac4163857a29"
     }
   },
   {
     "id":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
     "key":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
     "value":
     {
       "rev":"2-ff7b85665c4c297838963c80ecf481a3"
      }
   },
   {
     "id":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "key":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "value":
     {
       "rev":"2-cbdef49ef3ddc127eff86350844a6108"
     }
   }]
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>offset: offset where the document list started.</li>
  <li>rows: array of document objects, each containing id, key and revision number.</li>
  <li>total_rows: number of documents in the database.</li>
  <li>update_seq: current update sequence database.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:return>An object listing the documents in the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:all-documents</xqdoc:name><xqdoc:signature>declare function cloudant:all-documents($connection as anyURI, $database as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>all-documents</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Lists all the documents in a given database.</p>
 <p>This function has the same semantics as
 <a href="#all-documents-2">all-documents#2</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:return>An object listing the documents in the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:all-documents-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:all-documents-nondeterministic($connection as anyURI, $database as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>all-documents-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Lists all the documents in a given database.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>descending: return the documents in descending by key order (boolean,
   default: false).</li>
   <li>endkey: stop returning records when the specified key is reached (string).</li>
   <li>endkey_docid: stop returning records when the specified document ID is
   reached (string).</li>
   <li>group: group the results using the reduce function to a group or single
   row (boolean, default: false).</li>
   <li>group_level: specify the group level to be used (numeric).</li>
   <li>include_docs: include the full content of the documents in the return
   (boolean, default: false).</li>
   <li>inclusive_end: specifies whether the specified end key should be included
   in the result (boolean, default: true).</li>
   <li>key: return only documents that match the specified key (string).</li>
   <li>limit: limit the number of the returned documents to the specified number
   (numeric).</li>
   <li>reduce: use the reduction function (boolean, default: true).</li>
   <li>skip: skip this number of records before starting to return the results
   (numeric, default: 0).</li>
   <li>stale: allow the results from a stale view to be used (string, allowed
   value: "ok").</li>
   <li>startkey: start returning records when the specified key is reached (string).</li>
   <li>startkey_docid: start returning records when the specified document ID
   is reached (string).</li>
   <li>database-owner: specifies the database owner (string, default: connection
   user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:all-documents($connection, "db", {"database-owner": "username"})</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "total_rows":3,
   "offset":0,
   "rows":[
   {
     "id":"5a049246-179f-42ad-87ac-8f080426c17c",
     "key":"5a049246-179f-42ad-87ac-8f080426c17c",
     "value":
     {
       "rev":"2-9d5401898196997853b5ac4163857a29"
     }
   },
   {
     "id":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
     "key":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
     "value":
     {
       "rev":"2-ff7b85665c4c297838963c80ecf481a3"
      }
   },
   {
     "id":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "key":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "value":
     {
       "rev":"2-cbdef49ef3ddc127eff86350844a6108"
     }
   }]
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>offset: offset where the document list started.</li>
  <li>rows: array of document objects, each containing id, key and revision number.</li>
  <li>total_rows: number of documents in the database.</li>
  <li>update_seq: current update sequence database.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object listing the documents in the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:all-documents</xqdoc:name><xqdoc:signature>declare function cloudant:all-documents($connection as anyURI, $database as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Lists all the documents in a given database.</p>
 <p>This function has the same semantics as
 <a href="#all-documents-3">all-documents#3</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object listing the documents in the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:all-documents-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:all-documents-nondeterministic($connection as anyURI, $database as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>List the specified documents in a given database.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>For example,
 <pre>cloudant:multiple-documents($connection, "db",
   ("5a049246-179f-42ad-87ac-8f080426c17c",
    "d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
    "96f898f0-f6ff-4a9b-aac4-503992f31b01"))</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "total_rows":3,
   "offset":0,
   "rows":[
   {
     "id":"5a049246-179f-42ad-87ac-8f080426c17c",
     "key":"5a049246-179f-42ad-87ac-8f080426c17c",
     "value":
     {
       "rev":"2-9d5401898196997853b5ac4163857a29"
     }
   },
   {
     "id":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
     "key":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
     "value":
     {
       "rev":"2-ff7b85665c4c297838963c80ecf481a3"
      }
   },
   {
     "id":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "key":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "value":
     {
       "rev":"2-cbdef49ef3ddc127eff86350844a6108"
     }
   }]
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>offset: offset where the document list started.</li>
  <li>rows: array of document objects, each containing id, key and revision number.</li>
  <li>total_rows: number of documents in the database.</li>
  <li>update_seq: current update sequence database.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$keys The keys of the documents which must be retrieved</xqdoc:param><xqdoc:return>An object listing the specified documents in the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:multiple-documents</xqdoc:name><xqdoc:signature>declare function cloudant:multiple-documents($connection as anyURI, $database as string, $keys as string*) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>keys</xqdoc:name><xqdoc:type occurrence="*">string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="4"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>multiple-documents</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>List the specified documents in a given database.</p>
 <p>This function has the same semantics as
 <a href="#multiple-documents-3">multiple-documents#3</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$keys The keys of the documents which must be retrieved</xqdoc:param><xqdoc:return>An object listing the specified documents in the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:multiple-documents-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:multiple-documents-nondeterministic($connection as anyURI, $database as string, $keys as string*) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>keys</xqdoc:name><xqdoc:type occurrence="*">string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="4"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>multiple-documents-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Lists the specified documents in a given database.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>descending: return the documents in descending by key order (boolean,
   default: false).</li>
   <li>endkey: stop returning records when the specified key is reached (string).</li>
   <li>endkey_docid: stop returning records when the specified document ID is
   reached (string).</li>
   <li>group: group the results using the reduce function to a group or single
   row (boolean, default: false).</li>
   <li>group_level: specify the group level to be used (numeric).</li>
   <li>include_docs: include the full content of the documents in the return
   (boolean, default: false).</li>
   <li>inclusive_end: specifies whether the specified end key should be included
   in the result (boolean, default: true).</li>
   <li>key: return only documents that match the specified key (string).</li>
   <li>limit: limit the number of the returned documents to the specified number
   (numeric).</li>
   <li>reduce: use the reduction function (boolean, default: true).</li>
   <li>skip: skip this number of records before starting to return the results
   (numeric, default: 0).</li>
   <li>stale: allow the results from a stale view to be used (string, allowed
   value: "ok").</li>
   <li>startkey: start returning records when the specified key is reached
   (string).</li>
   <li>startkey_docid: start returning records when the specified document ID
   is reached (string).</li>
   <li>database-owner: specifies the database owner (string, default: connection
   user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:multiple-documents($connection, "db",
   ("5a049246-179f-42ad-87ac-8f080426c17c",
    "d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
    "96f898f0-f6ff-4a9b-aac4-503992f31b01"),
   {"database-owner": "username"})</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "total_rows":3,
   "offset":0,
   "rows":[
   {
     "id":"5a049246-179f-42ad-87ac-8f080426c17c",
     "key":"5a049246-179f-42ad-87ac-8f080426c17c",
     "value":
     {
       "rev":"2-9d5401898196997853b5ac4163857a29"
     }
   },
   {
     "id":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
     "key":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
     "value":
     {
       "rev":"2-ff7b85665c4c297838963c80ecf481a3"
      }
   },
   {
     "id":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "key":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "value":
     {
       "rev":"2-cbdef49ef3ddc127eff86350844a6108"
     }
   }]
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>offset: offset where the document list started.</li>
  <li>rows: array of document objects, each containing id, key and revision number.</li>
  <li>total_rows: number of documents in the database.</li>
  <li>update_seq: current update sequence database.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$keys The keys of the documents which must be retrieved</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object listing the specified documents in the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:multiple-documents</xqdoc:name><xqdoc:signature>declare function cloudant:multiple-documents($connection as anyURI, $database as string, $keys as string*, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>keys</xqdoc:name><xqdoc:type occurrence="*">string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>serialize</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Lists the specified documents in a given database.</p>
 <p>This function has the same semantics as
 <a href="#multiple-documents-4">multiple-documents#4</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$keys The keys of the documents which must be retrieved</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object listing the specified documents in the specified database</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:multiple-documents-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:multiple-documents-nondeterministic($connection as anyURI, $database as string, $keys as string*, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>keys</xqdoc:name><xqdoc:type occurrence="*">string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>serialize</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Creates, updates or deletes multiple documents with a single request.</p>
 <p>When creating new documents the document ID is optional. For updating
 existing documents, you must provide the document ID, revision information,
 and new document values. To delete existing documents, you must provide the
 document ID, revision information and add a field <code>_deleted</code> having
 value <code>true</code>.
 </p>
 <p>For example,
 <pre>cloudant:bulk-crud($connection, "db",
 (
   {
     "name":"Nicholas",
     "age":45,
     "gender":"male",
   },
   {
     "name":"Taylor",
     "age":50,
     "gender":"male",
     "_id":"5a049246-179f-42ad-87ac-8f080426c17c",
   },
   {
     "name":"Owen",
     "age":51,
     "gender":"male",
     "_id":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "_rev":"2-f29c836d0bedc4b4b95cfaa6d99e95df",
   },
   {
     "_id":"b675e932-9bb6-4fc9-b889-50238ac3512b",
     "_rev":"2-abd3942fdab3515bfed224abed2451feb",
     "_deleted": true
   }
 ))
 </pre>
 requires to insert the first document with a system-generated identifier, to
 insert the second one with a user-specified identifier, to update the third
 one and, finally,to delete the last one.
 </p>
 <p>
 The JSON returned by the_bulk_docs operation consists of an array
 of JSON structures, one for each submitted document.
 The returned JSON structure should be examined to ensure that all of
 the documents submitted in the original request were successfully added
 to the database. When no errors are raised, the revision of the new
 document is reported for all documents.
 </p>
 <p>
 <pre>
 [{
    "id":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
    "rev":"2-ff7b85665c4c297838963c80ecf481a3"
  },
  {
    "id":"5a049246-179f-42ad-87ac-8f080426c17c",
    "rev":"2-9d5401898196997853b5ac4163857a29"
  },
  {
    "id":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
    "rev":"2-cbdef49ef3ddc127eff86350844a6108"
  },
  {
    "id": "b675e932-9bb6-4fc9-b889-50238ac3512b",
    "rev":"2-12356bafb1232167befabb32127823943d"
  }]
 </pre>
 </p>
 <p>Cloudant will only guarantee that some of the documents will be
 saved when you send the request. The response will contain the list of
 documents successfully inserted or updated during the process.
 In the event of a crash, some of the documents may have been successfully
 saved, and some will have been lost.
 The response structure will indicate whether the document was updated by
 supplying the <code>rev</code> parameter indicating a new document revision
 was created. If the update failed, then you will get an error of type
 <code>conflict</code>.</p>
 <p>For example:
 <pre>
 [
   {
     "id":"FishStew",
     "error":"conflict",
     "reason":"Document update conflict."
   },
   {
     "id":"LambStew",
     "error":"conflict",
     "reason":"Document update conflict."
   },
   {
     "id":"7f7638c86173eb440b8890839ff35433",
     "error":"conflict",
     "reason":"Document update conflict."
   }
 ]
 </pre>
 In this case no new revision has been created and you will need to submit
 the document update with the correct revision tag, to update the document.
 </p>
 <p>The exact structure of each document in the returned array is:
 <ul>
   <li>id: the document ID</li>
   <li>rev: the new document revision, if a new revision was created</li>
   <li>error: the error type, if an error was raised</li>
   <li>reason: a description of the raised error, if an error was raised</li>
 </ul>
 </p>
 <p>The error type can either be conflict or forbidden. The first type means that
 the document as submitted is in conflict. The new revision has not been created
 and you will need to re-submit the document to the database. Entries with forbidden
 error type indicate that the validation routine applied to the document during submission
 has returned an error.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$documents An sequence of documents</xqdoc:param><xqdoc:return>An object describing the performed operations</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:bulk-crud</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:bulk-crud($connection as anyURI, $database as string, $documents as object()*) as array()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>documents</xqdoc:name><xqdoc:type occurrence="*">object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>array()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="4"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>bulk-crud</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Creates, updates or deletes multiple documents with a single request.</p>
 <p>When creating new documents the document ID is optional. For updating
 existing documents, you must provide the document ID, revision information,
 and new document values. To delete existing documents, you must provide the
 document ID, revision information and add a field <code>_deleted</code> having
 value <code>true</code>.
 </p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>all_or_nothing: sets the database commit mode to use all-or-nothing
   semantics (boolean, default: false).</li>
   <li>database-owner: specifies the database owner (string, default: connection
   user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:bulk-crud($connection, "db",
 (
   {
     "name":"Nicholas",
     "age":45,
     "gender":"male",
   },
   {
     "name":"Taylor",
     "age":50,
     "gender":"male",
     "_id":"5a049246-179f-42ad-87ac-8f080426c17c",
   },
   {
     "name":"Owen",
     "age":51,
     "gender":"male",
     "_id":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
     "_rev":"2-f29c836d0bedc4b4b95cfaa6d99e95df",
   },
   {
     "_id":"b675e932-9bb6-4fc9-b889-50238ac3512b",
     "_rev":"2-abd3942fdab3515bfed224abed2451feb",
     "_deleted": true
   }
 ),{"database-owner": "username"})
 </pre>
 requires to insert the first document with a system-generated identifier, to
 insert the second one with a user-specified identifier, to update the third
 one and, finally, to delete the last one.
 </p>
 <p>
 The JSON returned by the_bulk_docs operation consists of an array
 of JSON structures, one for each document in the original submission.
 The returned JSON structure should be examined to ensure that all of
 the documents submitted in the original request were successfully added
 to the database. When no errors are raised, the revision of the new
 document is reported for all documents.
 </p>
 <p>
 <pre>
 [{
    "id":"96f898f0-f6ff-4a9b-aac4-503992f31b01",
    "rev":"2-ff7b85665c4c297838963c80ecf481a3"
  },
  {
    "id":"5a049246-179f-42ad-87ac-8f080426c17c",
    "rev":"2-9d5401898196997853b5ac4163857a29"
  },
  {
    "id":"d1f61e66-7708-4da6-aa05-7cbc33b44b7e",
    "rev":"2-cbdef49ef3ddc127eff86350844a6108"
  },
  {
    "id": "b675e932-9bb6-4fc9-b889-50238ac3512b",
    "rev":"2-12356bafb1232167befabb32127823943d"
  }]
 </pre>
 </p>
 <p>Cloudant will only guarantee that some of the documents will be
 saved when you send the request. The response will contain the list of
 documents successfully inserted or updated during the process.
 In the event of a crash, some of the documents may have been successfully
 saved, and some will have been lost.
 The response structure will indicate whether the document was updated by
 supplying the <code>rev</code> parameter indicating a new document revision
 was created. If the update failed, then you will get an error of type
 <code>conflict</code>.</p>
 <p>For example:
 <pre>
 [
   {
     "id":"FishStew",
     "error":"conflict",
     "reason":"Document update conflict."
   },
   {
     "id":"LambStew",
     "error":"conflict",
     "reason":"Document update conflict."
   },
   {
     "id":"7f7638c86173eb440b8890839ff35433",
     "error":"conflict",
     "reason":"Document update conflict."
   }
 ]
 </pre>
 In this case no new revision has been created and you will need to submit
 the document update with the correct revision tag, to update the document.
 </p>
 <p>The exact structure of each document in the returned array is:
 <ul>
   <li>id: the document ID</li>
   <li>rev: the new document revision, if a new revision was created</li>
   <li>error: the error type, if an error was raised</li>
   <li>reason: a description of the raised error, if an error was raised</li>
 </ul>
 </p>
 <p>The error type can either be conflict or forbidden. The first type means that
 the document as submitted is in conflict. The new revision has not been created
 and you will need to re-submit the document to the database. Entries with forbidden
 error type indicate that the validation routine applied to the document during submission
 has returned an error.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$documents An sequence of documents</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object describing the performed operations</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:bulk-crud</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:bulk-crud($connection as anyURI, $database as string, $documents as object()*, $options as object()) as array()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>documents</xqdoc:name><xqdoc:type occurrence="*">object()</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>array()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-array</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>serialize</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:comment><xqdoc:description> <p>Commits any recent changes to the specified database to disk.</p>
 <p>For example,
 <pre>cloudant:commit-changes($connection, "db")</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "ok" : true,
   "instance_start_time" : "0"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:return>An object reporting the instance start time</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NOT-EXISTS The specified database does not exists</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:commit-changes</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:commit-changes($connection as anyURI, $database as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>commit-changes</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Commits any recent changes to the specified database to disk.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>database-owner: specifies the database owner (string, default: connection
   user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>
 cloudant:commit-changes($connection, "db", {"database-owner": "username"})
 </pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "ok" : true,
   "instance_start_time" : "0"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object reporting the instance start time</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NOT-EXISTS The specified database does not exists</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:commit-changes</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:commit-changes($connection as anyURI, $database as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Creates a new document in the specified database.</p>
 <p>Creates a new document in the specified database,
 using the supplied JSON document structure. If the JSON
 structure includes the _id field, then the document will
 be created with the specified document ID. If the _id
 field is not specified, a new unique ID will be generated.</p>
 <p>You can include one or more attachments with a given document
 by incorporating the attachment information within the JSON of
 the document. This provides a simpler alternative to loading
 documents with attachments than making a separate call.
 To do so add you can add the <code>_attachments</code> object
 field to the document. It can have one ore more fields, each
 defining a different attachment.
 The name of the field is the name of the attachment.
 Its value is an object containing the following fields:
 <ul>
  <li>content_type: MIME Content type string</li>
  <li>data: File attachment content, Base64 encoded</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:create-document($connection, "db",
   {
     "_id" : "FishStew",
     "servings" : 4,
     "subtitle" : "Delicious with fresh bread",
     "title" : "Fish Stew"
     "_attachments" : {
       "styling.css" : {
       "content-type" : "text/css",
       "data" : "cCB7IGZvbnQtc2l6ZTogMTJwdDsgfQo="
       }
     }
   })
 </pre>
 creates a document with an attachment named <code>styling.css</code>.
 </p>
 <h4>Creating a design document</h4>
 <p>To create a design document the <code>_id</code> field must be present and must
 start with <code>_design/</code>.</p>
 <p>For example, the following expression creates a design document
 <pre>cloudant:create-document($connection, "db",
   {
     "_id": "_design/DesDocID",
     "views": {
       "view1": {
       "map":"function(doc){emit(doc.field, 1)}",
       "reduce": "function(key, value, rereduce){return sum(values)}"
       }
     },
     "indexes": {
       "mysearch" : {
         "analyzer": {"name": "portuguese", "stopwords":["foo", "bar, "baz"]},
         "index": "function(doc){ ... }"
       },
     }
   }, {"database-owner": "username"})
 </pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned JSON object will report the new document revision
 and has the following form:
 <pre>
 {
   "id":"64575eef70ab90a2b8d55fc09e00440d",
   "ok":true,
   "rev":"1-9c65296036141e575d32ba9c034dd3ee"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document A document</xqdoc:param><xqdoc:return>An object which contains the document id and revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:DOCUMENT Document creation conflict</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:create-document</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:create-document($connection as anyURI, $database as string, $document as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="4"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>create-document</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Creates a new document in the specified database</p>
 <p>Creates a new document in the specified database,
 using the supplied JSON document structure. If the JSON
 structure includes the _id field, then the document will
 be created with the specified document ID. If the _id
 field is not specified, a new unique ID will be generated.</p>
 <p>You can include one or more attachments with a given document
 by incorporating the attachment information within the JSON of
 the document. This provides a simpler alternative to loading
 documents with attachments than making a separate call.
 To do so add you can add the <code>_attachments</code> object
 field to the document. It can have one ore more fields, each
 defining a different attachment.
 The name of the field is the name of the attachment.
 Its value is an object containing the following fields:
 <ul>
  <li>content_type: MIME Content type string</li>
  <li>data: File attachment content, Base64 encoded</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:create-document($connection, "db",
   {
     "_id" : "FishStew",
     "servings" : 4,
     "subtitle" : "Delicious with fresh bread",
     "title" : "Fish Stew"
     "_attachments" : {
       "styling.css" : {
       "content-type" : "text/css",
       "data" : "cCB7IGZvbnQtc2l6ZTogMTJwdDsgfQo="
       }
     }
   }, {"database-owner": "username"})
 </pre>
 creates a document with an attachment named <code>styling.css</code>.
 </p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>batch: requires batch mode for insertions (string, allowed value: "ok")</li>
   <li>database-owner: specifies the database owner (string, default: connection user).</li>
 </ul>
 </p>
 <p>You can write documents to the database at a higher rate
 by using the batch option. This collects document writes
 together in memory (on a user-by-user basis) before they are
 committed to disk. This increases the risk of the documents
 not being stored in the event of a failure, since the documents
 are not written to disk immediately.</p>
 <h4>Creating a design document</h4>
 <p>To create a design document the <code>_id</code> field must be present and must
 start with <code>_design/</code>.</p>
 <p>For example, the following expression creates a design document
 <pre>cloudant:create-document($connection, "db",
   {
     "_id": "_design/DesDocID",
     "views": {
       "view1": {
       "map":"function(doc){emit(doc.field, 1)}",
       "reduce": "function(key, value, rereduce){return sum(values)}"
       }
     },
     "indexes": {
       "mysearch" : {
         "analyzer": {"name": "portuguese", "stopwords":["foo", "bar, "baz"]},
         "index": "function(doc){ ... }"
       },
     }
   }, {"database-owner": "username"})
 </pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned JSON object will report the new document revision
 and has the following form:
 <pre>
 {
   "id":"64575eef70ab90a2b8d55fc09e00440d",
   "ok":true,
   "rev":"1-9c65296036141e575d32ba9c034dd3ee"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document A document</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object which contains the document id and revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:DOCUMENT Document creation conflict</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:create-document</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:create-document($connection as anyURI, $database as string, $document as object(), $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>serialize</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Retrieves a document from the specified database.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>The latest revision of the document will be returned.</p>
 <p>If the document includes attachments, then the
 returned structure will contain a summary of the
 attachments associated with the document, but not the
 attachment data itself.</p>
 <p>For example,
 <pre>cloudant:document($connection, "db", "DocID")</pre>.
 </p>
 <p>The returned JSON object will contain the document
 and has the following format:
 <pre>
 {
   "_id": "DocID",
   "_rev": "2-f29c836d0bedc4b4b95cfaa6d99e95df",
   "name": "Anna",
   "age": 89,
   "gender": "female",
   "_attachments": {
     "my attachment": {
       "content_type": "application/json; charset=UTF-8",
       "revpos": 2,
       "digest": "md5-37IZysiyWLRWx31J/1WQHw==",
       "length": 12,
       "stub": true
       }
     }
   }
 </pre>
 </p>
 <p>
 The meaning of the fields in the returned object is the following:
 <ul>
   <li>_id: document ID</li>
   <li>_rev: document revision</li>
   <li>attachments: document attachments (optional), each field denotes the name
       of a different attachment
     <ul>
       <li>content_type: attachment MIME Content type string</li>
       <li>length: attachment length in bytes</li>
       <li>revpos: revision where this attachment exists</li>
       <li>digest: MD5 checksum of the attachment</li>
       <li>stub: indicates whether the attachment is a stub</li>
    </ul>
  </li>
 </ul>
 </p>
 <h4>Retrieving a design document from the specified database</h4>
 <p>To retrieve a design document the document id must start with
 <code>_design/</code>.</p>
 <p>For example,
 <pre>cloudant:document($connection, "db", "_design/DesDocID")</pre>.
 </p>
 <p>A JSON object with the following format is returned:
 <pre>
 {
  "_id": "_design/DesDocID",
   "views": {
     "view1": {
       "map":"function(doc){emit(doc.field, 1)}",
       "reduce": "function(key, value, rereduce){return sum(values)}"
     }
   },
   "indexes": {
     "mysearch" : {
       "analyzer": {"name": "portuguese", "stopwords":["foo", "bar, "baz"]},
       "index": "function(doc){ ... }"
     },
   }
 }
 </pre>
 </p>
 <p>
 The meaning of the fields in the returned object is the following:
 <ul>
   <li>_id: document ID</li>
   <li>_rev: document revision</li>
   <li>views: object defining the views. Each field defines a different view.
       The field name is the name of the view and has the following content:
     <ul>
       <li>map: view map function</li>
       <li>reduce: view reduce function (optional)</li>
     </ul>
   </li>
   <li>indexes: object defining the view indexes. Each field defines a different index.
       The field name is the name of the index and has the following content:
     <ul>
       <li>analyzer: Name of the analyzer to be used or an object with the
       following fields:
         <ul>
           <li>name: Name of the analyzer</li>
           <li>stopwords: An array of stop words. Stop words are words that
           should not be indexed.</li>
         </ul>
       </li>
       <li>index: Function that handles the indexing</li>
     </ul>
   </li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:return>The specified document</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:DOCUMENT The specified document or revision cannot be found</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:document</xqdoc:name><xqdoc:signature>declare function cloudant:document($connection as anyURI, $database as string, $document-id as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="4"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>document</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Retrieves a document from the specified database.</p>
 <p>This function has the same semantics as <a href="#document-3">document#3</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:return>The specified document</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:DOCUMENT The specified document or revision cannot be found</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:document-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:document-nondeterministic($connection as anyURI, $database as string, $document-id as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="4"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>document-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Retrieves a document from the specified database</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>Unless you request a specific revision, the latest
 revision of the document will always be returned.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>conflict: returns the conflict tree for the document (boolean)</li>
   <li>rev: specifies the revision to return (string)</li>
   <li>revs: return a list of the revisions for the document (boolean)</li>
   <li>revs_info: return a list of detailed revision information for the document
   (boolean, allowed value: true)</li>
   <li>database-owner: specifies the database owner (string, default: connection user).</li>
 </ul>
 </p>
 <p>If the document includes attachments, then the
 returned structure will contain a summary of the
 attachments associated with the document, but not the
 attachment data itself.</p>
 <p>For example,
 <pre>
 cloudant:document($connection, "db", "DocID", {"database-owner": "username"})
 </pre>.
 </p>
 <p>The returned JSON object will contain the document
 and has the following format:
 <pre>
 {
   "_id": "DocID",
   "_rev": "2-f29c836d0bedc4b4b95cfaa6d99e95df",
   "name": "Anna",
   "age": 89,
   "gender": "female",
   "_attachments": {
     "my attachment": {
       "content_type": "application/json; charset=UTF-8",
       "revpos": 2,
       "digest": "md5-37IZysiyWLRWx31J/1WQHw==",
       "length": 12,
       "stub": true
       }
     }
   }
 </pre>
 </p>
 <p>
 The meaning of the fields in the returned object is the following:
 <ul>
   <li>_id: document ID</li>
   <li>_rev: document revision</li>
   <li>attachments: document attachments (optional), each field denotes the name
       of a different attachment:
   <ul>
     <li>content_type: attachment MIME Content type string</li>
     <li>length: attachment length in bytes</li>
     <li>revpos: revision where this attachment exists</li>
     <li>digest: MD5 checksum of the attachment</li>
     <li>stub: indicates whether the attachment is a stub</li>
  </ul>
  </li>
 </ul>
 </p>
 <h4>Retrieving a design document from the specified database</h4>
 <p>To retrieve a design document the document id must start with
 <code>_design/</code>.</p>
 <p>For example,
 <pre>cloudant:document($connection, "db", "_design/DesDocID", {"database-owner": "username"})</pre>.
 </p>
 <p>A JSON object with the following format is returned:
 <pre>
 {
  "_id": "_design/DesDocID",
  "_rev": "2-f29c836d0bedc4b4b95cfaa6d99e95df",
   "views": {
     "view1": {
       "map":"function(doc){emit(doc.field, 1)}",
       "reduce": "function(key, value, rereduce){return sum(values)}"
     }
   },
   "indexes": {
     "mysearch" : {
       "analyzer": {"name": "portuguese", "stopwords":["foo", "bar, "baz"]},
       "index": "function(doc){ ... }"
     },
   }
 }
 </pre>
 </p>
 <p>
 The meaning of the fields in the returned object is the following:
 <ul>
   <li>_id: document ID</li>
   <li>_rev: document revision</li>
   <li>views: object defining the views. Each field defines a different view.
       The field name is the name of the view and has the following content:
     <ul>
       <li>map: view map function</li>
       <li>reduce: view reduce function (optional)</li>
     </ul>
   </li>
   <li>indexes: object defining the view indexes. Each field defines a different index.
       The field name is the name of the index and has the following content:
     <ul>
       <li>analyzer: Name of the analyzer to be used or an object with the
       following fields:
         <ul>
           <li>name: Name of the analyzer</li>
           <li>stopwords: An array of stop words. Stop words are words that
           should not be indexed.</li>
         </ul>
       </li>
       <li>index: Function that handles the indexing</li>
     </ul>
   </li>
 </ul>
 </p>
 <h4>Getting a List of Revisions</h4>
 <p>You can obtain a list of the revisions for a given document
 by the revs option.</p>
 <p>For example,
 <pre>cloudant:document($connection, "db", "DocID", {"revs": true})</pre>.
 </p>
 <p>The returned JSON object includes the original document and
 a <code>_revisions</code> structure that includes the revision
 information:
 <pre>
 {
   "servings":4,
   "subtitle":"Delicious with a green salad",
   "_id":"FishStew",
   "title":"Irish Fish Stew",
   "_revisions":
   {
     "ids": [
       "a1a9b39ee3cc39181b796a69cb48521c",
       "7c4740b4dcf26683e941d6641c00c39d",
       "9c65296036141e575d32ba9c034dd3ee"
      ],
     "start":3
  },
  "_rev":"3-a1a9b39ee3cc39181b796a69cb48521c"
 }
 </pre>
 </p>
 <p>The meaning of the additional fields is the following:
 <ul>
   <li>_revisions: document revisions</li>
   <li>_ids: array of valid revision IDs, in reverse order (latest first)</li>
   <li>start: prefix number for the latest revision</li>
 </ul>
 </p>
 <h4>Obtaining an Extended Revision History</h4>
 <p>You can get additional information about the revisions for a given document
 with the <code>revs_info</code> option.</p>
 <p>For example,
 <pre>cloudant:document($connection, "db", "DocID", {"revs_info": true})</pre>.
 </p>
 <p>This returns extended revision information, including the availability and status
 of each revision:
 <pre>
 {
   "servings":4,
   "subtitle":"Delicious with a green salad",
   "_id":"FishStew",
   "_revs_info":[
     {
       "status":"available",
       "rev":"3-a1a9b39ee3cc39181b796a69cb48521c"
     },
     {
       "status":"available",
       "rev":"2-7c4740b4dcf26683e941d6641c00c39d"
     },
     {
       "status":"available",
       "rev":"1-9c65296036141e575d32ba9c034dd3ee"
     }
   ],
   "title":"Irish Fish Stew",
   "_rev":"3-a1a9b39ee3cc39181b796a69cb48521c"
 }
 </pre>
 </p>
 <p>The meaning of the additional fields is the following:
 <ul>
   <li>_revs_info: document extended revision info</li>
   <li>rev: revision ID</li>
   <li>status: revision status</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>The specified document</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:DOCUMENT The specified document or revision cannot be found</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:document</xqdoc:name><xqdoc:signature>declare function cloudant:document($connection as anyURI, $database as string, $document-id as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Retrieves a document from the specified database</p>
 <p>This function has the same semantics as <a href="#document-4">document#4</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>The specified document</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:DOCUMENT The specified document or revision cannot be found</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:document-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:document-nondeterministic($connection as anyURI, $database as string, $document-id as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Returns the latest revision and size for a given document.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>For example,
 <pre>cloudant:document-info($connection, "db", "DocID")</pre>.
 </p>
 <p>The format of the returned object is the following and contains
 the document id, latest revision and size.
 <pre>
 {
   "ok": true,
   "id": "DocID",
   "rev": "1-764b9b11845fd0b73cfa0e61acc74ecf",
   "size": 500
 }
 </pre>
 </p>
 <h4>Returning the latest revision and size for a given design document</h4>
 <p>To return the latest revision and size of a design document the document
 id must start with
 <code>_design/</code>.</p>
 <p>For example,
 <pre>cloudant:document-info($connection, "db", "_design/DesDocID")</pre>.
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:return>An object specifying the document id, revision and size</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DOCUMENT The specified document or revision cannot be found</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:document-info</xqdoc:name><xqdoc:signature>declare function cloudant:document-info($connection as anyURI, $database as string, $document-id as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="4"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>document-info</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Returns the latest revision and size for a given document.</p>
 <p>This function has the same semantics as
 <a href="#document-info-3">document-info#3</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:return>An object specifying the document id, revision and size</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DOCUMENT The specified document or revision cannot be found</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:document-info-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:document-info-nondeterministic($connection as anyURI, $database as string, $document-id as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="4"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>document-info-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Returns the latest revision and size for a given document.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>database-owner: specifies the database owner (string, default: connection user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>
 cloudant:document-info($connection, "db", "DocID", {"database-owner": "username"})
 </pre>.
 </p>
 <p>The format of the returned object is the following and contains
 the document id, latest revision and size.
 <pre>
 {
   "ok": true,
   "id": "DocID",
   "rev": "1-764b9b11845fd0b73cfa0e61acc74ecf",
   "size": 500
 }
 </pre>
 </p>
 <h4>Returning the latest revision and size for a given design document</h4>
 <p>To return the latest revision and size of a design document the document
 id must start with <code>_design/</code>.</p>
 <p>For example,
 <pre>
 cloudant:document-info($connection, "db", "_design/DesDocID", {"database-owner": "username"})
 </pre>.
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object specifying the document id, revision and size</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DOCUMENT The specified document or revision cannot be found</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:document-info</xqdoc:name><xqdoc:signature>declare function cloudant:document-info($connection as anyURI, $database as string, $document-id as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>replace</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Returns the latest revision and size for a given document.</p>
 <p>This function has the same semantics as
 <a href="#document-info-4">document-info#4</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object specifying the document id, revision and size</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DOCUMENT The specified document or revision cannot be found</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:document-info-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:document-info-nondeterministic($connection as anyURI, $database as string, $document-id as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>replace</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:comment><xqdoc:description> <p>Creates or updates a document.</p>
 <p>When creating a new document, the <code>_id</code> field must
 be specified.</p>
 <p>For example,
 <pre>cloudant:create-or-update-document($connection, "db",
   {
     "name":"Hannah",
     "age":120,
     "gender":"female",
     "_id":"DocID"
   })</pre>.
 </p>
 <p>When updating a document, the <code>_id</code> and the
 <code>_rev</code> field, which contains the last document revision,
 must be specified.</p>
 <p>For example,
 <pre>cloudant:create-or-update-document($connection, "db",
   {
     "name":"Hannah",
     "age":40,
     "gender":"female",
     "_id":"DocID",
     "_rev":"1-764b9b11845fd0b73cfa0e61acc74ecf"
   })</pre>.
 </p>
 <h4>Creating or updating a design document</h4>
 <p>To create or update a design document the document id must
 start with <code>_design/</code>.</p>
 <p>For example, the following expression creates a design document
 <pre>cloudant:create-or-update-document($connection, "db",
   {
     "_id": "_design/DesDocID",
     "views": {
       "view1": {
       "map":"function(doc){emit(doc.field, 1)}",
       "reduce": "function(key, value, rereduce){return sum(values)}"
       }
     },
     "indexes": {
       "mysearch" : {
         "analyzer": {"name": "portuguese", "stopwords":["foo", "bar, "baz"]},
         "index": "function(doc){ ... }"
       },
     }
   })
 </pre>.
 </p>
 <p>For example, the following expression updates a design document
 <pre>cloudant:create-or-update-document($connection, "db",
   {
     "_id": "_design/DesDocID",
     "_rev": "2-f29c836d0bedc4b4b95cfaa6d99e95df",
     "views": {
       "view1": {
       "map":"function(doc){emit(doc.field, 1)}",
       "reduce": "function(key, value, rereduce){return sum(values)}"
       }
     },
     "indexes": {
       "mysearch" : {
         "analyzer": {"name": "portuguese", "stopwords":["foo", "bar, "baz"]},
         "index": "function(doc){ ... }"
       },
     }
   })
 </pre>.</p>
 <p>
 The meaning of the fields in the design document is the following:
 <ul>
   <li>_id: document ID</li>
   <li>_rev: document revision</li>
   <li>views: object defining the views. Each field defines a different view.
       The field name is the name of the view and has the following content:
     <ul>
       <li>map: view map function</li>
       <li>reduce: view reduce function (optional)</li>
     </ul>
   </li>
   <li>indexes: object defining the view indexes. Each field defines a different index.
       The field name is the name of the index and has the following content:
     <ul>
       <li>analyzer: Name of the analyzer to be used or an object with the
       following fields:
         <ul>
           <li>name: Name of the analyzer</li>
           <li>stopwords: An array of stop words. Stop words are words that
           should not be indexed.</li>
         </ul>
       </li>
       <li>index: Function that handles the indexing</li>
     </ul>
   </li>
 </ul>
 </p>
 <h4>Return value</h4>
 <p>The format of the returned object is the following and contains
 the document id and revision.
 <pre>
 {
   "ok":true,
   "id":"DocID",
   "rev":"1-764b9b11845fd0b73cfa0e61acc74ecf"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document A document</xqdoc:param><xqdoc:return>An object which specifies the document id and its new revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:DOCUMENT-MALFORMED Malformed document object</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:create-or-update-document</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:create-or-update-document($connection as anyURI, $database as string, $document as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="4"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>create-or-update-document</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Creates or updates a document.</p>
 <p>When creating a new document, the <code>_id</code> field must
 be specified.</p>
 <p>For example,
 <pre>cloudant:create-or-update-document($connection, "db", "DocID",
   {
     "name":"Hannah",
     "age":120,
     "gender":"female",
     "_id":"DocID"
   }, {"database-owner": "username"})</pre>.
 </p>
 <p>When updating a document, the <code>_id</code> and the
 <code>_rev</code> field, which contains the last document revision,
 must be specified.</p>
 <p>For example,
 <pre>cloudant:create-or-update-document($connection, "db", "DocID",
   {
     "name":"Hannah",
     "age":40,
     "gender":"female",
     "_id":"DocID",
     "_rev":"1-764b9b11845fd0b73cfa0e61acc74ecf"
   }, {"database-owner": "username"})</pre>.
 </p>
 <h4>Creating or updating a design document</h4>
 <p>To create or update a design document the document id must
 start with <code>_design/</code>.</p>
 <p>For example, the following expression creates a design document
 <pre>cloudant:create-or-update-document($connection, "db",
   {
     "_id": "_design/DesDocID",
     "views": {
       "view1": {
       "map":"function(doc){emit(doc.field, 1)}",
       "reduce": "function(key, value, rereduce){return sum(values)}"
       }
     },
     "indexes": {
       "mysearch" : {
         "analyzer": {"name": "portuguese", "stopwords":["foo", "bar, "baz"]},
         "index": "function(doc){ ... }"
       },
     }
   }, {"database-owner": "username"})
 </pre>.
 </p>
 <pre>cloudant:create-or-update-document($connection, "db",
   {
     "_id": "_design/DesDocID",
     "_rev": "2-f29c836d0bedc4b4b95cfaa6d99e95df",
     "views": {
       "view1": {
       "map":"function(doc){emit(doc.field, 1)}",
       "reduce": "function(key, value, rereduce){return sum(values)}"
       }
     },
     "indexes": {
       "mysearch" : {
         "analyzer": {"name": "portuguese", "stopwords":["foo", "bar, "baz"]},
         "index": "function(doc){ ... }"
       },
     }
   }, {"database-owner": "username"})
 </pre>.
 <p>
 The meaning of the fields in the design document is the following:
 <ul>
   <li>_id: document ID</li>
   <li>_rev: document revision</li>
   <li>views: object defining the views. Each field defines a different view.
       The field name is the name of the view and has the following content:
     <ul>
       <li>map: view map function</li>
       <li>reduce: view reduce function (optional)</li>
     </ul>
   </li>
   <li>indexes: object defining the view indexes. Each field defines a different index.
       The field name is the name of the index and has the following content:
     <ul>
       <li>analyzer: Name of the analyzer to be used or an object with the
       following fields:
         <ul>
           <li>name: Name of the analyzer</li>
           <li>stopwords: An array of stop words. Stop words are words that
           should not be indexed.</li>
         </ul>
       </li>
       <li>index: Function that handles the indexing</li>
     </ul>
   </li>
 </ul>
 </p>
 <h4>Return value</h4>
 <p>The format of the returned object is the following and contains
 the document id and revision.
 <pre>
 {
   "ok":true,
   "id":"DocID",
   "rev":"1-764b9b11845fd0b73cfa0e61acc74ecf"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document A document</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object which specifies the document id and its new revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:DOCUMENT-MALFORMED Malformed document object</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:create-or-update-document</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:create-or-update-document($connection as anyURI, $database as string, $document as object(), $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>mandatory-string-document-parameter</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>string-parameter</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>serialize</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Deletes the specified document from a database.</p>
 <p>The latest document revision must be specified.</p>
 <p>For example,
 <pre>
 cloudant:delete-document($connection, "db", "DocID", "3-7c4740b4dcf26683e941d6641c00c39d")
 </pre>.
 </p>
 <h4>Deleting a design document</h4>
 <p>To delete a design document the document id must
 start with <code>_design/</code>.</p>
 <p>For example,
 <pre>
 cloudant:delete-document($connection, "db", "_design/DesDocID", "3-7c4740b4dcf26683e941d6641c00c39d")
 </pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned object reports the document id and its
 new revision, as follows:
 <pre>
 {
   "id":"DocID",
   "ok":true,
   "rev":"4-2719fd41187c60762ff584761b714cfb"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$document-rev A document revision</xqdoc:param><xqdoc:return>An object which specifies the document id and its new revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:REVISION Specified revision is missing, invalid or not the latest.</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:delete-document</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:delete-document($connection as anyURI, $database as string, $document-id as string, $document-rev as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-rev</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="5"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>delete-document</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>Deletes the specified document from a database.</p>
 <p>The latest document revision must be specified.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>database-owner: specifies the database owner (string, default: connection user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>
 cloudant:delete-document($connection, "db", "DocID", "3-7c4740b4dcf26683e941d6641c00c39d",
   {"database-owner": "username"})
 </pre>.
 </p>
 <h4>Deleting a design document</h4>
 <p>To delete a design document the document id must
 start with <code>_design/</code>.</p>
 <p>For example,
 <pre>
 cloudant:delete-document($connection, "db", "_design/DesDocID", "3-7c4740b4dcf26683e941d6641c00c39d",
   {"database-owner": "username"})
 </pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned object reports the document id and its
 new revision, as follows:
 <pre>
 {
   "id":"DocID",
   "ok":true,
   "rev":"4-2719fd41187c60762ff584761b714cfb"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$document-rev A document revision</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object which specifies the document id and its new revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:REVISION Specified revision is missing, invalid or not the latest.</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:delete-document</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:delete-document($connection as anyURI, $database as string, $document-id as string, $document-rev as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-rev</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Retrieves the specified document attachment.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>For example,
 <pre>cloudant:attachment($connection, "db", "DocID", "Attachment")</pre>.
 </p>
 <h4>Retrieving a design document attachment.</h4>
 <p>To retrieve a design document attachment the document id must
 start with <code>_design/</code>.</p>
 <p>For example,
 <pre>cloudant:attachment($connection, "db", "_design/DocID", "Attachment")</pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned object reports the media-type of the attachment as
 it was specified when the attachment was submitted to the database and
 its raw content.
 The format of the returned object is the following:
 <pre>
 {
   "media-type": "text/plain",
   "content" : "Hello World"
 }
 </pre>
 </p>
 <p>The type of the content field is determined by the media-type returned by the
 server. If the media-type indicates that the body content is textual,
 then the content has type string, base64Binary otherwise.
 Specifically, the body content is considered textual only if the MIME-type specified in
 the media-type is one of:
 <ul>
   <li>"application/json"</li>
   <li>"application/x-javascript"</li>
   <li>"application/xml"</li>
   <li>"application/xml-external-parsed-entity"</li>
 </ul>
 or if the MIME-type starts with "text/" or ends with "+xml".</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$attachment-name An attchment name</xqdoc:param><xqdoc:return>The specified document attachment</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:attachment</xqdoc:name><xqdoc:signature>declare function cloudant:attachment($connection as anyURI, $database as string, $document-id as string, $attachment-name as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="5"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>attachment</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Retrieves the specified document attachment.</p>
 <p>This function has the same semantics as
 <a href="#attachment-4">attachment#4</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$attachment-name An attchment name</xqdoc:param><xqdoc:return>The specified document attachment</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:attachment-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:attachment-nondeterministic($connection as anyURI, $database as string, $document-id as string, $attachment-name as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="5"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>attachment-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>Retrieves the specified document attachment.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>database-owner: specifies the database owner (string, default: connection user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:attachment($connection, "db", "DocID", "Attachment",
   {"database-owner": "username"})</pre>.
 </p>
 <h4>Retrieving a design document attachment.</h4>
 <p>To retrieve a design document attachment the document id must
 start with <code>_design/</code>.</p>
 <p>For example,
 <pre>cloudant:attachment($connection, "db", "_design/DocID", "Attachment",
   {"database-owner": "username"})</pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned object reports the media-type of the attachment as
 it was specified when the attachment was submitted to the database and
 its raw content.
 The format of the returned object is the following:
 <pre>
 {
   "media-type": "text/plain",
   "content" : "Hello World"
 }
 </pre>
 </p>
 <p>The type of the content field is determined by the media-type returned by the
 server. If the media-type indicates that the body content is textual,
 then the content has type string, base64Binary otherwise.
 Specifically, the body content is considered textual only if the MIME-type specified in
 the media-type is one of:
 <ul>
   <li>"application/json"</li>
   <li>"application/x-javascript"</li>
   <li>"application/xml"</li>
   <li>"application/xml-external-parsed-entity"</li>
 </ul>
 or if the MIME-type starts with "text/" or ends with "+xml".</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$attachment-name An attchment name</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>The specified document attachment</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:ATTACHMENT-NOT-EXISTS Attachment does not exists</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:attachment</xqdoc:name><xqdoc:signature>declare function cloudant:attachment($connection as anyURI, $database as string, $document-id as string, $attachment-name as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>Retrieves the specified document attachment.</p>
 <p>This function has the same semantics as <a href="#attachment-5">attachment#5</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$attachment-name An attchment name</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>The specified document attachment</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:ATTACHMENT-NOT-EXISTS Attachment does not exists</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:attachment-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:attachment-nondeterministic($connection as anyURI, $database as string, $document-id as string, $attachment-name as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="7"><xqdoc:comment><xqdoc:description> <p>Creates or updates a document attachment.</p>
 <p>The latest document revision must be specified.</p>
 <p>For example,
 <pre>cloudant:create-or-update-attachment($connection, "db", "FishStew",
   "8-7c4740b4dcf26683e941d6641c00c39d", "AttachmentName", "text/plain",
   "AttachmentContent")</pre>.
 </p>
 <h4>Creating or updating a design document attachment.</h4>
 <p>To create or update a design document attachment the document id must
 start with <code>_design/</code>.</p>
 <p>For example,
 <pre>cloudant:create-or-update-attachment($connection, "db", "_design/DesDocId",
   "8-7c4740b4dcf26683e941d6641c00c39d", "AttachmentName", "text/plain",
   "AttachmentContent")</pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned object reports the document id and its new
 revision, as follows:
 <pre>
 {
   "id":"FishStew",
   "ok":true,
   "rev":"9-247bb19a41bfd9bfdaf5ee6e2e05be74"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$document-rev A document revision</xqdoc:param><xqdoc:param>$attachment-name The name of the attachment</xqdoc:param><xqdoc:param>$media-type The media-type of the attachment</xqdoc:param><xqdoc:param>$attachment The content of the attachment</xqdoc:param><xqdoc:return>An object containing the document id and its new revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:ATTACHMENT-TYPE Attachment type must be string, base64Binary or hexBinary</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:create-or-update-attachment</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:create-or-update-attachment($connection as anyURI, $database as string, $document-id as string, $document-rev as string, $attachment-name as string, $media-type as string, $attachment as atomic) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-rev</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>media-type</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment</xqdoc:name><xqdoc:type>atomic</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="8"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>create-or-update-attachment</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="8"><xqdoc:comment><xqdoc:description> <p>Creates or updates a document attachment.</p>
 <p>The latest document revision must be specified.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>database-owner: specifies the database owner (string, default: connection user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:create-or-update-attachment($connection, "db", "FishStew",
   "8-7c4740b4dcf26683e941d6641c00c39d", "AttachmentName", "text/plain",
   "AttachmentContent", {"database-owner": "username"})</pre>.
 </p>
 <h4>Creating or updating a design document attachment.</h4>
 <p>To create or update a design document attachment the document id must
 start with <code>_design/</code>.</p>
 <p>For example,
 <pre>cloudant:create-or-update-attachment($connection, "db", "_design/DesDocId",
   "8-7c4740b4dcf26683e941d6641c00c39d", "AttachmentName", "text/plain",
   "AttachmentContent", {"database-owner": "username"})</pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned object reports the document id and its new
 revision, as follows:
 <pre>
 {
   "id":"FishStew",
   "ok":true,
   "rev":"9-247bb19a41bfd9bfdaf5ee6e2e05be74"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$document-rev A document revision</xqdoc:param><xqdoc:param>$attachment-name The name of the attachment</xqdoc:param><xqdoc:param>$media-type The media-type of the attachment</xqdoc:param><xqdoc:param>$attachment The content of the attachment</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object containing the document id and its new revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:ATTACHMENT-TYPE Attachment type must be string, base64Binary or hexBinary</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:create-or-update-attachment</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:create-or-update-attachment($connection as anyURI, $database as string, $document-id as string, $document-rev as string, $attachment-name as string, $media-type as string, $attachment as atomic, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-rev</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>media-type</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment</xqdoc:name><xqdoc:type>atomic</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>Deletes the specified attachment.</p>
 <p>The latest document revision must be specified.</p>
 <p>For example,
 <pre>cloudant:delete-attachment($connection, "db", "FishStew",
   "8-7c4740b4dcf26683e941d6641c00c39d", "AttachmentName")</pre>.
 </p>
 <h4>Deleting a design document attachment.</h4>
 <p>To delete a design document attachment the document id must
 start with <code>_design/</code>.</p>
 <p>For example,
 <pre>cloudant:delete-attachment($connection, "db", "_design/DesDocId",
   "8-7c4740b4dcf26683e941d6641c00c39d",
   "AttachmentName", "text/plain", "AttachmentContent")</pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned object reports the document id and its new
 revision, as follows:
 <pre>
 {
   "id":"FishStew",
   "ok":true,
   "rev":"9-247bb19a41bfd9bfdaf5ee6e2e05be74"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$document-rev A document revision</xqdoc:param><xqdoc:param>$attachment-name The name of the attachment</xqdoc:param><xqdoc:return>An object containing the document id and its new revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:ATTACHMENT-NOT-EXISTS Attachment does not exists</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:ATTACHMENT-TYPE Attachment type must be string, base64Binary or hexBinary</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:delete-attachment</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:delete-attachment($connection as anyURI, $database as string, $document-id as string, $document-rev as string, $attachment-name as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-rev</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="6"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>delete-attachment</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="6"><xqdoc:comment><xqdoc:description> <p>Deletes the specified attachment.</p>
 <p>The latest document revision must be specified.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>database-owner: specifies the database owner (string, default: connection user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:delete-attachment($connection, "db", "FishStew",
 "8-7c4740b4dcf26683e941d6641c00c39d", "AttachmentName",
 {"database-owner": "username"})</pre>.
 </p>
 <h4>Deleting a design document attachment.</h4>
 <p>To delete a design document attachment the document id must
 start with <code>_design/</code>.</p>
 <p>For example,
 <pre>cloudant:delete-attachment($connection, "db", "_design/DesDocId",
   "8-7c4740b4dcf26683e941d6641c00c39d", "AttachmentName", "text/plain",
   "AttachmentContent", {"database-owner": "username"})</pre>.
 </p>
 <h4>Return value</h4>
 <p>The returned object reports the document id and its new
 revision, as follows:
 <pre>
 {
   "id":"FishStew",
   "ok":true,
   "rev":"9-247bb19a41bfd9bfdaf5ee6e2e05be74"
 }
 </pre>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$document-id A document identifier</xqdoc:param><xqdoc:param>$document-rev A document revision</xqdoc:param><xqdoc:param>$attachment-name The name of the attachment</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object containing the document id and its new revision</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:DATABASE-NAME Invalid database name</xqdoc:error><xqdoc:error>cloudant:ATTACHMENT-NOT-EXISTS Attachment does not exists</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:ATTACHMENT-TYPE Attachment type must be string, base64Binary or hexBinary</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error></xqdoc:comment><xqdoc:name>cloudant:delete-attachment</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function cloudant:delete-attachment($connection as anyURI, $database as string, $document-id as string, $document-rev as string, $attachment-name as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document-rev</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>attachment-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>prepare-document-id</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Returns a JSON object describing all the documents in a given view.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>For example,
 <pre>cloudant:all-view-documents($connection, "db", "recipes", "by_title")</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "offset" : 0,
   "rows" :
   [
     {
       "id" : "3-tiersalmonspinachandavocadoterrine",
       "key" : "3-tier salmon, spinach and avocado terrine",
       "value" : ["3-tier salmon, spinach and avocado terrine"]
     },
     {
       "id" : "Aberffrawcake",
       "key" : "Aberffraw cake",
       "value" : ["Aberffraw cake"]
     },
     {
       "id" : "Adukiandorangecasserole-microwave",
       "key" : "Aduki and orange casserole - microwave",
       "value" : ["Aduki and orange casserole - microwave"]
     }
   ],
   "total_rows" : 3
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>offset: offset where the document list started.</li>
  <li>rows: array of document objects, each containing id, key and revision number.</li>
  <li>total_rows: number of documents in the database.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$view A view name</xqdoc:param><xqdoc:return>An object listing all documents in the specified view</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:all-view-documents</xqdoc:name><xqdoc:signature>declare function cloudant:all-view-documents($connection as anyURI, $database as string, $design-document as string, $view as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>view</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="5"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>all-view-documents</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="4"><xqdoc:comment><xqdoc:description> <p>Returns a JSON object describing all the documents in a given view.</p>
 <p>This function has the same semantics as
 <a href="#all-view-documents-4">all-view-documents#4</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$view A view name</xqdoc:param><xqdoc:return>An object listing all documents in the specified view</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:all-view-documents-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:all-view-documents-nondeterministic($connection as anyURI, $database as string, $design-document as string, $view as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>view</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="5"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>all-view-documents-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>Returns a JSON object describing all the documents in a given view.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>descending: return the documents in descending by key order (boolean,
   default: false)</li>
   <li>endkey: stop returning records when the specified key is reached (string)</li>
   <li>endkey_docid: stop returning records when the specified document ID is
   reached (string)</li>
   <li>group: group the results using the reduce function to a group or single
   row (boolean, default: false)</li>
   <li>group_level: specify the group level to be used (numeric)</li>
   <li>include_docs: include the full content of the documents in the return
   (boolean, default: false)</li>
   <li>inclusive_end: specifies whether the specified end key should be included
   in the result (boolean, default: true)</li>
   <li>key: return only documents that match the specified key (string)</li>
   <li>limit: limit the number of the returned documents to the specified number
   (numeric)</li>
   <li>reduce: use the reduction function (boolean, default: true)</li>
   <li>skip: skip this number of records before starting to return the results
   (numeric, default: 0)</li>
   <li>stale: allow the results from a stale view to be used (string, allowed
   value: "ok")</li>
   <li>startkey: start returning records when the specified key is reached
   (string)</li>
   <li>startkey_docid: start returning records when the specified document ID
   is reached (string)</li>
   <li>database-owner: specifies the database owner (string, default:
   connection user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:all-view-documents($connection, "db", "recipes", "by_title",
   {"database-owner" : "username"})</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "offset" : 0,
   "rows" :
   [
     {
       "id" : "3-tiersalmonspinachandavocadoterrine",
       "key" : "3-tier salmon, spinach and avocado terrine",
       "value" : ["3-tier salmon, spinach and avocado terrine"]
     },
     {
       "id" : "Aberffrawcake",
       "key" : "Aberffraw cake",
       "value" : ["Aberffraw cake"]
     },
     {
       "id" : "Adukiandorangecasserole-microwave",
       "key" : "Aduki and orange casserole - microwave",
       "value" : ["Aduki and orange casserole - microwave"]
     }
   ],
   "total_rows" : 3
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>offset: offset where the document list started.</li>
  <li>rows: array of document objects, each containing id, key and revision
  number.</li>
  <li>total_rows: number of documents in the database.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$view A view name</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object listing all documents in the specified view</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:all-view-documents</xqdoc:name><xqdoc:signature>declare function cloudant:all-view-documents($connection as anyURI, $database as string, $design-document as string, $view as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>view</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>Returns a JSON object describing all the documents in a given view.</p>
 <p>This function has the same semantics as
 <a href="#all-view-documents-5">all-view-documents#5</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$view A view name</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object listing all documents in the specified view</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:all-view-documents-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:all-view-documents-nondeterministic($connection as anyURI, $database as string, $design-document as string, $view as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>view</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>List the specified documents in a given view.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>For example,
 <pre>cloudant:multiple-view-documents($connection, "db", "recipes", "by_ingredient",
 ("claret", "clear apple juice"))
 </pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "total_rows" : 26484,
   "rows" : [
     {
       "value" : ["Scotch collops"]],
       "id" : "Scotchcollops",
       "key" : "claret"
     },
     {
       "value" : ["Stand pie"],
       "id" : "Standpie",
       "key" : "clear apple juice"
     }
   ],
   "offset" : 6324
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>offset: offset where the document list started.</li>
  <li>rows: array of document objects, each containing id, key and revision
  number.</li>
  <li>total_rows: number of documents in the database.</li>
  <li>update_seq: current update sequence database.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$view A view name</xqdoc:param><xqdoc:param>$keys The keys of the documents which must be retrieved</xqdoc:param><xqdoc:return>An object listing all the specified documents in the specified view</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:multiple-view-documents</xqdoc:name><xqdoc:signature>declare function cloudant:multiple-view-documents($connection as anyURI, $database as string, $design-document as string, $view as string, $keys as string*) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>view</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>keys</xqdoc:name><xqdoc:type occurrence="*">string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="6"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>multiple-view-documents</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>List the specified documents in a given view.</p>
 <p>This function has the same semantics as
 <a href="#multiple-view-documents-5">multiple-view-documents#5</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$view A view name</xqdoc:param><xqdoc:param>$keys The keys of the documents which must be retrieved</xqdoc:param><xqdoc:return>An object listing all the specified documents in the specified view</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:multiple-view-documents-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:multiple-view-documents-nondeterministic($connection as anyURI, $database as string, $design-document as string, $view as string, $keys as string*) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>view</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>keys</xqdoc:name><xqdoc:type occurrence="*">string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="6"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>multiple-view-documents-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="6"><xqdoc:comment><xqdoc:description> <p>Lists the specified documents in a given view.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>descending: return the documents in descending by key order (boolean,
   default: false).</li>
   <li>endkey: stop returning records when the specified key is reached (string).</li>
   <li>endkey_docid: stop returning records when the specified document ID is
   reached (string).</li>
   <li>group: group the results using the reduce function to a group or single
   row (boolean, default: false).</li>
   <li>group_level: specify the group level to be used (numeric).</li>
   <li>include_docs: include the full content of the documents in the return
   (boolean, default: false).</li>
   <li>inclusive_end: specifies whether the specified end key should be included
   in the result (boolean, default: true).</li>
   <li>key: return only documents that match the specified key (string).</li>
   <li>limit: limit the number of the returned documents to the specified number
   (numeric).</li>
   <li>reduce: use the reduction function (boolean, default: true).</li>
   <li>skip: skip this number of records before starting to return the results
   (numeric, default: 0).</li>
   <li>stale: allow the results from a stale view to be used (string, allowed
   value: "ok").</li>
   <li>startkey: start returning records when the specified key is reached
   (string).</li>
   <li>startkey_docid: start returning records when the specified document ID
   is reached (string).</li>
   <li>database-owner: specifies the database owner (string, default: connection
   user).</li>
 </ul>
 </p>
 <p>For example,
 <pre>cloudant:multiple-view-documents($connection, "db", "recipes",
   "by_ingredient", ("claret", "clear apple juice"),
   {"database-owner": "username"})
 </pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "total_rows" : 26484,
   "rows" : [
     {
       "value" : ["Scotch collops"]],
       "id" : "Scotchcollops",
       "key" : "claret"
     },
     {
       "value" : ["Stand pie"],
       "id" : "Standpie",
       "key" : "clear apple juice"
     }
   ],
   "offset" : 6324
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>offset: offset where the document list started.</li>
  <li>rows: array of document objects, each containing id, key and revision number.</li>
  <li>total_rows: number of documents in the database.</li>
  <li>update_seq: current update sequence database.</li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$view A view name</xqdoc:param><xqdoc:param>$keys The keys of the documents which must be retrieved</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object listing all the specified documents in the specified view</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:multiple-view-documents</xqdoc:name><xqdoc:signature>declare function cloudant:multiple-view-documents($connection as anyURI, $database as string, $design-document as string, $view as string, $keys as string*, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>view</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>keys</xqdoc:name><xqdoc:type occurrence="*">string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>serialize</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="6"><xqdoc:comment><xqdoc:description> <p>Lists the specified documents in a given view.</p>
 <p>This function has the same semantics as
 <a href="#multiple-view-documents-6">multiple-view-documents#6</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$view A view name</xqdoc:param><xqdoc:param>$keys The keys of the documents which must be retrieved</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>An object listing all the specified documents in the specified view</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:multiple-view-documents-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:multiple-view-documents-nondeterministic($connection as anyURI, $database as string, $design-document as string, $view as string, $keys as string*, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>view</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>keys</xqdoc:name><xqdoc:type occurrence="*">string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>serialize</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>Executes a Lucene query against a view and returns the query result.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>This method searches for documents whose index fields match the Lucene query.
 Which fields of a document are indexed and how is determined by the index functions
 in the design document.</p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>For example,
 <pre>cloudant:lucene-query($connection, "db", "designdoc", "view", "a*")</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "total_rows": 3,
   "bookmark": "g1AAAACWeJzLYWBgYMpgTmFQSElKzi9KdUhJMtbLTS3KLElMT9VLzskvTUnMK9HLSy3JAalMcgCSSfX____PAvPdQHwQSGTIIt6UPBaQlgNA6j_CJPsPcJOyANNEKzY",
   "rows":
   [
     {
       "id": "dd828eb4-c3f1-470f-aeff-c375ef70e4ad",
       "order": [0.0, 1],
       "fields":
       {
         "default": "aa",
         "foo": 0.0
       }
     },
     {
       "id": "ea522cf1-eb8e-4477-aa92-d1fa459bb216",
       "order": [1.0, 0],
       "fields":
       {
         "default": "ab",
         "foo": 1.0
       }
     },
     {
       "id": "c838baed-d573-43ea-9c34-621cf0f13301",
       "order": [2.0, 0],
       "fields":
       {
         "default": "ac",
         "foo": 2.0
       }
     }
   ]
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>total_rows: number of results returned.</li>
  <li>bookmark: string to be submitted in the next query to page through results.
      If this response contained no results, the bookmark will be the same as the
      one used to obtain this response.</li>
  <li>rows: array of document objects, each document contains the following fields:
    <ul>
      <li>order: specifies the order with regard to the indexed fields.</li>
      <li>fields: Object containing other search indexes.</li>
    </ul>
  </li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$index An index name</xqdoc:param><xqdoc:param>$query A Lucene query</xqdoc:param><xqdoc:return>The Lucene query results</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:lucene-query</xqdoc:name><xqdoc:signature>declare function cloudant:lucene-query($connection as anyURI, $database as string, $design-document as string, $index as string, $query as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>index</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>query</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="6"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>lucene-query</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="5"><xqdoc:comment><xqdoc:description> <p>Executes a Lucene query against a view and returns the query result.</p>
 <p>This function has the same semantics as
 <a href="#lucene-query-5">lucene-query#5</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$index An index name</xqdoc:param><xqdoc:param>$query A Lucene query</xqdoc:param><xqdoc:return>The Lucene query results</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:lucene-query-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:lucene-query-nondeterministic($connection as anyURI, $database as string, $design-document as string, $index as string, $query as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>index</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>query</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="6"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>lucene-query-nondeterministic</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="6"><xqdoc:comment><xqdoc:description> <p>Executes a Lucene query against a view and returns the query result.</p>
 <p>This function is declared as deterministic and should be used whenever result
 caching is acceptable.</p>
 <p>This method searches for documents whose index fields match the Lucene query.
 Which fields of a document are indexed and how is determined by the index functions
 in the design document.</p>
 <p>This function allows to specify an additional options object.
 The following options are supported:
 <ul>
   <li>bookmark: A bookmark that was received from a previous search. This
   allows you to page through the results. If there are no more results after
   the bookmark, you will get a response with an empty rows array and the
   same bookmark. That way you can determine that you have reached the end
   of the result list (string).</li>
   <li>stale: allow the results from a stale view to be used (string, allowed
   value: "ok").</li>
   <li>limit: limit the number of the returned documents to the specified
   number (numeric).</li>
   <li>include_docs: include the full content of the documents in the return
   (boolean, default: false).</li>
   <li>sort: specifies the sort order of the results. A JSON string of the
   form <code>"fieldname&lt;type&gt;"</code> or <code>-fieldname&lt;type&gt;</code>
   for descending order, where fieldname is the name of a string or number field
   and type is either number or string. The type part is optional and defaults
   to number. Some examples are <code>"foo"</code>, <code>"-foo"</code>,
   <code>"bar&lt;string&gt;"</code>, <code>"-foo&lt;number&gt;"</code>. String
   fields used for sorting must not be analyzed fields. The field(s) used for
   sorting must be indexed by the same indexer used for the search query.
   Alternatively, a JSON array of such strings is allowed.</li>
 </ul>
 </p>
 <p>The information is returned as a JSON structure containing meta information
 about the return structure, and the list of documents each with its ID, revision
 and key. The key is generated from the document ID.</p>
 <p>For example,
 <pre>cloudant:lucene-query($connection, "db", "designdoc", "view", "a*",
 {"database-owner": "username"})</pre>.
 </p>
 <p>An object with the following format is returned:
 <pre>
 {
   "total_rows": 3,
   "bookmark": "g1AAAACWeJzLYWBgYMpgTmFQSElKzi9KdUhJMtbLTS3KLElMT9VLzskvTUnMK9HLSy3JAalMcgCSSfX____PAvPdQHwQSGTIIt6UPBaQlgNA6j_CJPsPcJOyANNEKzY",
   "rows":
   [
     {
       "id": "dd828eb4-c3f1-470f-aeff-c375ef70e4ad",
       "order": [0.0, 1],
       "fields":
       {
         "default": "aa",
         "foo": 0.0
       }
     },
     {
       "id": "ea522cf1-eb8e-4477-aa92-d1fa459bb216",
       "order": [1.0, 0],
       "fields":
       {
         "default": "ab",
         "foo": 1.0
       }
     },
     {
       "id": "c838baed-d573-43ea-9c34-621cf0f13301",
       "order": [2.0, 0],
       "fields":
       {
         "default": "ac",
         "foo": 2.0
       }
     }
   ]
 }
 </pre>
 </p>
 <p>The fields have the following meaning:
 <ul>
  <li>total_rows: number of results returned.</li>
  <li>bookmark: string to be submitted in the next query to page through results.
      If this response contained no results, the bookmark will be the same as the
      one used to obtain this response.</li>
  <li>rows: array of document objects, each document contains the following fields:
    <ul>
      <li>order: specifies the order with regard to the indexed fields.</li>
      <li>fields: Object containing other search indexes.</li>
    </ul>
  </li>
 </ul>
 </p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$index An index name</xqdoc:param><xqdoc:param>$query A Lucene query</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>The Lucene query results</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:lucene-query</xqdoc:name><xqdoc:signature>declare function cloudant:lucene-query($connection as anyURI, $database as string, $design-document as string, $index as string, $query as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>index</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>query</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-deterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="6"><xqdoc:comment><xqdoc:description> <p>Executes a Lucene query against a view and returns the query result.</p>
 <p>This function has the same semantics as <a href="#lucene-query-6">lucene-query#6</a>,
 but is declared as being non deterministic and thus should only be used when
 result caching is not desired.</p>
</xqdoc:description><xqdoc:param>$connection A connection identifier</xqdoc:param><xqdoc:param>$database A database name</xqdoc:param><xqdoc:param>$design-document A design document name</xqdoc:param><xqdoc:param>$index An index name</xqdoc:param><xqdoc:param>$query A Lucene query</xqdoc:param><xqdoc:param>$options An object specifying additional request options</xqdoc:param><xqdoc:return>The Lucene query results</xqdoc:return><xqdoc:error>cloudant:AUTHORIZATION Authorization error</xqdoc:error><xqdoc:error>cloudant:HTTP An HTTP error occurred when issuing the request</xqdoc:error><xqdoc:error>cloudant:RESPONSE An error occurred parsing the server response</xqdoc:error><xqdoc:error>cloudant:CONNECTION The specified connection does not exist</xqdoc:error><xqdoc:error>cloudant:INTERNAL Cloudant internal error</xqdoc:error><xqdoc:error>cloudant:OPTIONS Malformed options object</xqdoc:error><xqdoc:see><a href="#determinism">Notice about determinism</a></xqdoc:see></xqdoc:comment><xqdoc:name>cloudant:lucene-query-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function cloudant:lucene-query-nondeterministic($connection as anyURI, $database as string, $design-document as string, $index as string, $query as string, $options as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>design-document</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>index</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>query</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>encode-database-name</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>query-arguments</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>request</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>send-request-nondeterministic</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cloudant:encode-database-name</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:encode-database-name($database as string) as string</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>database</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>matches</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:name>cloudant:uri</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:uri($database-owner as string, $api as string) as string</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>database-owner</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>api</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="3"><xqdoc:name>cloudant:request</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:request($connection as anyURI, $api as string, $options as object()?) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>api</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type occurrence="?">object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>retrieve-connection</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>string-parameter-encoded</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>uri</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cloudant:error</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:error($response as object()) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>response</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:name>cloudant:error</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:error($error-code as QName, $response as object()) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>error-code</xqdoc:name><xqdoc:type>QName</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>response</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:name>cloudant:string-parameter</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:string-parameter($parameter-name as string, $default-value as string?, $options as object()?)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>parameter-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>default-value</xqdoc:name><xqdoc:type occurrence="?">string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type occurrence="?">object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parameter</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:name>cloudant:mandatory-string-parameter</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:mandatory-string-parameter($parameter-name as string, $options as object()?)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>parameter-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type occurrence="?">object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parameter</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:name>cloudant:string-parameter-encoded</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:string-parameter-encoded($parameter-name as string, $default-value as string?, $options as object()?)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>parameter-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>default-value</xqdoc:name><xqdoc:type occurrence="?">string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type occurrence="?">object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parameter</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:name>cloudant:mandatory-string-document-parameter</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:mandatory-string-document-parameter($parameter-name as string, $document as object()?)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>parameter-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>document</xqdoc:name><xqdoc:type occurrence="?">object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parameter</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>not</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:name>cloudant:parameter</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:parameter($parameter-name as string, $default-value as item()?, $options as object()?)</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>parameter-name</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>default-value</xqdoc:name><xqdoc:type occurrence="?">item()</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type occurrence="?">object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>exists</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:name>cloudant:query-arguments</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:query-arguments($first-parameters as boolean, $options as object()?) as string</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>first-parameters</xqdoc:name><xqdoc:type>boolean</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>options</xqdoc:name><xqdoc:type occurrence="?">object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>keys</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-join</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="3"><xqdoc:name>cloudant:error</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:error($error-name as QName, $error-message as string, $response as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>error-name</xqdoc:name><xqdoc:type>QName</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>error-message</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>response</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/cloudant</xqdoc:uri><xqdoc:name>parse-object</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cloudant:send-request</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %private %an:sequential function cloudant:send-request($http-request as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>http-request</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/http-client</xqdoc:uri><xqdoc:name>send-request</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cloudant:send-request-nondeterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %private %an:nondeterministic function cloudant:send-request-nondeterministic($http-request as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>http-request</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/http-client</xqdoc:uri><xqdoc:name>send-nondeterministic-request</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cloudant:send-request-deterministic</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:send-request-deterministic($http-request as object()) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>http-request</xqdoc:name><xqdoc:type>object()</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/http-client</xqdoc:uri><xqdoc:name>send-deterministic-request</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cloudant:parse-object</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:parse-object($serjson as string) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>serjson</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>parse-json</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cloudant:parse-array</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:parse-array($serjson as string) as array()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>serjson</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>array()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>parse-json</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cloudant:prepare-document-id</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:prepare-document-id($document-id as string) as string</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>document-id</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>concat</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>encode-for-uri</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>starts-with</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>substring-after</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="2"><xqdoc:name>cloudant:store-connection</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %private %an:sequential function cloudant:store-connection($default-owner as string, $session-key as string) as anyURI</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>default-owner</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter><xqdoc:parameter><xqdoc:name>session-key</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>anyURI</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/maps</xqdoc:uri><xqdoc:name>available-maps</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/maps</xqdoc:uri><xqdoc:name>create</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="3"><xqdoc:uri>http://www.28msec.com/modules/maps</xqdoc:uri><xqdoc:name>insert</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>anyURI</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>serialize</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri><xqdoc:name>uuid</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>cloudant:retrieve-connection</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function cloudant:retrieve-connection($connection as anyURI) as object()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>connection</xqdoc:name><xqdoc:type>anyURI</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>object()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/maps</xqdoc:uri><xqdoc:name>available-maps</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.28msec.com/modules/maps</xqdoc:uri><xqdoc:name>get</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>empty</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>parse-json</xqdoc:name></xqdoc:invoked></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>