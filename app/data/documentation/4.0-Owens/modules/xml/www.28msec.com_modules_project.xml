<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0"><xqdoc:control><xqdoc:date>2015-02-17T14:42:36.342765+02:00</xqdoc:date><xqdoc:version>1.0</xqdoc:version></xqdoc:control><xqdoc:module type="library"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>project</xqdoc:name><xqdoc:comment><xqdoc:description> This module contains functions to introspect a project.
</xqdoc:description><xqdoc:author>28msec</xqdoc:author><xqdoc:custom tag="language">jsoniq</xqdoc:custom><xqdoc:custom tag="version">1.0</xqdoc:custom><xqdoc:custom tag="encoding">utf-8</xqdoc:custom></xqdoc:comment><xqdoc:custom tag="namespaces"><xqdoc:namespace prefix="an" uri="http://zorba.io/annotations" isSchema="false"/><xqdoc:namespace prefix="base64" uri="http://zorba.io/modules/base64" isSchema="false"/><xqdoc:namespace prefix="hmac" uri="http://zorba.io/modules/hmac" isSchema="false"/><xqdoc:namespace prefix="project" uri="http://www.28msec.com/modules/project" isSchema="false"/><xqdoc:namespace prefix="random" uri="http://zorba.io/modules/random" isSchema="false"/><xqdoc:namespace prefix="ver" uri="http://zorba.io/options/versioning" isSchema="false"/></xqdoc:custom></xqdoc:module><xqdoc:imports><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri></xqdoc:import><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/base64</xqdoc:uri></xqdoc:import><xqdoc:import type="library"><xqdoc:uri>http://zorba.io/modules/hmac</xqdoc:uri></xqdoc:import></xqdoc:imports><xqdoc:variables/><xqdoc:collections/><xqdoc:indexes/><xqdoc:functions><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> Returns the name of the project.
</xqdoc:description><xqdoc:return>the said name</xqdoc:return></xqdoc:comment><xqdoc:name>project:name</xqdoc:name><xqdoc:signature>declare function project:name() as string external</xqdoc:signature><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> Returns the host of the scheduler.
</xqdoc:description><xqdoc:return>the scheduler host.</xqdoc:return></xqdoc:comment><xqdoc:name>project:scheduler-host</xqdoc:name><xqdoc:signature>declare function project:scheduler-host() as string external</xqdoc:signature><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> Checks if the project has a seed file.
</xqdoc:description><xqdoc:return>whether the project has a seed file or not</xqdoc:return><xqdoc:error>project:SEED-FILE error accessing the seed file</xqdoc:error></xqdoc:comment><xqdoc:name>project:has-seed</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function project:has-seed() as boolean external</xqdoc:signature><xqdoc:return><xqdoc:type>boolean</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> Returns the project seed.
</xqdoc:description><xqdoc:return>the project seed</xqdoc:return><xqdoc:error>project:NO-SEED the project seed file cannot be found</xqdoc:error><xqdoc:error>project:SEED-FILE error reading the seed file</xqdoc:error></xqdoc:comment><xqdoc:name>project:seed</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function project:seed() as string external</xqdoc:signature><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> Creates and return new random project seed.
</xqdoc:description><xqdoc:return>the project seed</xqdoc:return><xqdoc:error>project:SEED-EXISTS the project already has a seed file</xqdoc:error><xqdoc:error>project:SEED-FILE error writing the seed file</xqdoc:error><xqdoc:error>project:SEED the specified seed is not at least 8 characters long</xqdoc:error></xqdoc:comment><xqdoc:name>project:create-seed</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function project:create-seed() as string</xqdoc:signature><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>create-seed-impl</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri><xqdoc:name>uuid</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Creates a new project seed.
 The specified seed must be at least 8 characters long.
</xqdoc:description><xqdoc:param>$seed The new project seed.</xqdoc:param><xqdoc:return>the empty sequence</xqdoc:return><xqdoc:error>project:SEED-EXISTS the project already has a seed file</xqdoc:error><xqdoc:error>project:SEED-FILE error writing the seed file</xqdoc:error></xqdoc:comment><xqdoc:name>project:create-seed</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function project:create-seed($seed as string) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>seed</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>create-seed-impl</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>validate-seed</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> Returns the project seed. If the project has no seed a new random one is created.
</xqdoc:description><xqdoc:return>the project seed</xqdoc:return><xqdoc:error>project:SEED-FILE error reading or writing the seed file</xqdoc:error></xqdoc:comment><xqdoc:name>project:read-or-create-seed</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function project:read-or-create-seed() as string</xqdoc:signature><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>create-seed</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>has-seed</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>seed</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> Sets a new random project seed.
</xqdoc:description><xqdoc:return>the project seed</xqdoc:return><xqdoc:error>project:SEED-FILE error reading or writing the seed file</xqdoc:error></xqdoc:comment><xqdoc:name>project:set-seed</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function project:set-seed() as string</xqdoc:signature><xqdoc:return><xqdoc:type>string</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>set-seed-impl</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://zorba.io/modules/random</xqdoc:uri><xqdoc:name>uuid</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Sets the project seed.
 The specified seed must be at least 8 characters long.
</xqdoc:description><xqdoc:param>$seed The new project seed.</xqdoc:param><xqdoc:return>the project seed</xqdoc:return><xqdoc:error>project:SEED-FILE error reading or writing the seed file</xqdoc:error><xqdoc:error>project:SEED the specified seed is not at least 8 characters long</xqdoc:error></xqdoc:comment><xqdoc:name>project:set-seed</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:sequential function project:set-seed($seed as string) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>seed</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>set-seed-impl</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>validate-seed</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>project:validate-seed</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/></xqdoc:annotations><xqdoc:signature>declare %private function project:validate-seed($seed as string) as empty-sequence()</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>seed</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string-length</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>project:create-seed-impl</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %private %an:sequential function project:create-seed-impl($seed as string) as empty-sequence() external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>seed</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:name>project:set-seed-impl</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="" namespace="http://www.w3.org/2005/xpath-functions" localname="private" value=""/><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="sequential" value=""/></xqdoc:annotations><xqdoc:signature>declare %private %an:sequential function project:set-seed-impl($seed as string) as empty-sequence() external</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>seed</xqdoc:name><xqdoc:type>string</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>empty-sequence()</xqdoc:type></xqdoc:return></xqdoc:function><xqdoc:function arity="1"><xqdoc:comment><xqdoc:description> Creates a new project token, that expires at the desired date.
 The input to the function contains the expiration information.
 If a duration is used, then the function will create a token expiring after the specified duration.
 If a dateTime is used, then the function will create a token expiring that date.
 If an integer is used, then the function will create a token expiring after the specified number of seconds.
</xqdoc:description><xqdoc:param>$expiration describes the expiration date of the token.</xqdoc:param><xqdoc:return>the new project token</xqdoc:return><xqdoc:error>project:INVALID-PARAMETER expiration information is invalid (not a duration, date or number of seconds)</xqdoc:error></xqdoc:comment><xqdoc:name>project:token</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function project:token($expiration as xs:anyAtomicType) as xs:base64Binary</xqdoc:signature><xqdoc:parameters><xqdoc:parameter><xqdoc:name>expiration</xqdoc:name><xqdoc:type>xs:anyAtomicType</xqdoc:type></xqdoc:parameter></xqdoc:parameters><xqdoc:return><xqdoc:type>xs:base64Binary</xqdoc:type></xqdoc:return><xqdoc:invoked arity="0"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>seed</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>QName</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2001/XMLSchema</xqdoc:uri><xqdoc:name>dayTimeDuration</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="0"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>current-dateTime</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>error</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://www.w3.org/2005/xpath-functions</xqdoc:uri><xqdoc:name>string</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="1"><xqdoc:uri>http://zorba.io/modules/base64</xqdoc:uri><xqdoc:name>encode</xqdoc:name></xqdoc:invoked><xqdoc:invoked arity="2"><xqdoc:uri>http://zorba.io/modules/hmac</xqdoc:uri><xqdoc:name>sha1</xqdoc:name></xqdoc:invoked></xqdoc:function><xqdoc:function arity="0"><xqdoc:comment><xqdoc:description> Creates a new project token, that expires after 12 hours.
</xqdoc:description><xqdoc:return>the project token</xqdoc:return></xqdoc:comment><xqdoc:name>project:token</xqdoc:name><xqdoc:annotations><xqdoc:annotation prefix="an" namespace="http://zorba.io/annotations" localname="nondeterministic" value=""/></xqdoc:annotations><xqdoc:signature>declare %an:nondeterministic function project:token() as xs:base64Binary</xqdoc:signature><xqdoc:return><xqdoc:type>xs:base64Binary</xqdoc:type></xqdoc:return><xqdoc:invoked arity="1"><xqdoc:uri>http://www.28msec.com/modules/project</xqdoc:uri><xqdoc:name>token</xqdoc:name></xqdoc:invoked></xqdoc:function></xqdoc:functions></xqdoc:xqdoc>