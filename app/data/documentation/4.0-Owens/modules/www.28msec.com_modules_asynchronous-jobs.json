{ "ns" : "http://www.28msec.com/modules/asynchronous-jobs", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This module provides functionality for executing asynchronous jobs.\n There are three kinds of jobs: (1) a job for executing a (public or private)\n query of your project, (2) a job for mapping an input\n collection into an output collection, and (3) a job for shuffling the items\n of an input collection to several output collections.\n Map and Shuffle jobs are mostly used within\n the parallelism framework and are not meant to be created directly.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Jobs that have been scheduled for execution can be referred to by\n an opaque identifier being returned by the corresponding scheduling\n function (e.g. job:execute or job:map). Specifically,\n the job's identifier can be used to retrieve the status of a job\n (e.g. job:status) or the names of its input and output collections.</p>\n", "sees" : [  ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Ghislain Fourny</xqdoc:author>", "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Julien Ribon</xqdoc:author>", "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Matthias Brantner</xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "", "prefix" : "an" }, { "uri" : "http://zorba.io/modules/base64", "prefix" : "base64" }, { "uri" : "http://zorba.io/modules/fetch", "prefix" : "fetch" }, { "uri" : "http://www.zorba-xquery.com/modules/http-client", "prefix" : "http-client" }, { "uri" : "http://www.28msec.com/modules/asynchronous-jobs", "prefix" : "job" }, { "uri" : "http://www.28msec.com/modules/project", "prefix" : "project" }, { "uri" : "http://zorba.io/modules/random", "prefix" : "rand" }, { "uri" : "http://www.28msec.com/modules/http/request", "prefix" : "request" }, { "uri" : "http://www.28msec.com/modules/store", "prefix" : "store" } ], "functions" : [ { "isDocumented" : true, "arity" : 2, "name" : "build-map-shuffle", "qname" : "job:build-map-shuffle", "signature" : "($input-collection as xs:string, $options as object()?) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Builds an object describing an asynchronous job (map or shuffle).</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This object can then be sent to the scheduler.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The $options parameter allows for the specification of properties for\n the shuffle job. Allowed options are:\n <ul>\n   <li><tt>kind</tt>: the kind of job (\"map\" or \"shuffle\").</li>\n   <li><tt>map-function</tt> (map jobs only): a function with any signature\n   (item()* to item()*),\n   and that is used to map the input collection to the output collection.</li>\n   <li><tt>shuffle-function</tt> (shuffle jobs only): a function taking an item\n   and returning an integer.\n   It is used to select the output collection to which each item is sent.</li>\n   <li><tt>output-collection as string</tt> (map jobs only): the name of the collection in\n     which the output of the executed query is stored. If not specified,\n     the result of the query will be stored in a collection withing the\n     MongoDB database associated with the project. The name of the\n     collection is randomly generated and starts with <tt>_28.temporary</tt>\n   </li>\n   <li><tt>output-collections as array</tt> (shuffle jobs only): an array with the names of the collections in\n     which the items of the input collections are shuffled. Compulsory.\n   </li>\n   <li><tt>chunk-info as object</tt>: an object containing the specification of a chunk\n     of the input collection. The shuffling will only occur on this chunk.\n     If not specified, the entire input collection will be mapped.\n   </li>\n   <li><tt>allow-streaming as boolean</tt> (map jobs only): a boolean indicating if calling the map function can\n     be distributed over partitions of the input collection. If false, the map function will\n     be called only once on the entire input collection. This might result\n     in a cache overflow if the number of items is too big. If true,\n     the input will be arbitrarily partitioned and the map function will be called for each\n     partition. The size of a partition is chosen in order to be smaller than the cache size.\n     The default is false.\n   </li>\n   <li><tt>dependencies as array</tt>: an array containing the ids of all asynchronous jobs that must\n     be completed before this job starts. This job will be hold pending until all these dependencies\n     are completed.\n   </li>\n </ul>\n </p>\n", "summary" : "<p>  Builds an object describing an asynchronous job (map or shuffle).</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "input-collection", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The name of the collection that the job processes.</div>" }, { "name" : "options", "type" : "object()", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object specifying above options for the asynchronous job.</div>" } ], "returns" : { "type" : "object()", "description" : "the id of the scheduled job, which can be used to pull for the status and results." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XPTY0004 if the type of a supplied option is incorrect.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0005 if the supplied function does not have a name.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0006 if the supplied function is in the local namespace.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0008 if the supplied input collection is not available.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "error", "qname" : "job:error", "signature" : "($id as xs:string) as object()?", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the error object output by an asynchronous job, in case of a failed job.</p>\n", "summary" : "<p>  Returns the error object output by an asynchronous job, in case of a failed job.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "id", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the id of the asynchronous job to query.</div>" } ], "returns" : { "type" : "object()?", "description" : "the error object output by the corresponding asynchronous job." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 1, "name" : "execute", "qname" : "job:execute", "signature" : "($query as xs:string) as xs:string", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Schedules an asynchronous job executing the given (public or private)\n query from your project.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The result of the query will be stored in a collection withing the\n MongoDB database associated with the project. The name of the collection\n is randomly generated and starts with <tt>_28.temporary</tt>.</p>\n", "summary" : "<p>  Schedules an asynchronous job executing the given (public or private)\n query from your project.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "query", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The path of the query to execute, which must begin with /public or /private. (examples: /public/query.xq, /private/query.jq).</div>" } ], "returns" : { "type" : "xs:string", "description" : "The id of the scheduled job." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0003 if the supplied query path does not begin with /public or /private.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0004 if the supplied query path cannot be resolved.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "execute", "qname" : "job:execute", "signature" : "($query as xs:string, $options as object()?) as xs:string", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Schedules an asynchronous job executing the given (public or private)\n query from your project.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The $options parameter allows for the specification of properties for\n the asynchronously executed job. Allowed options are:\n <ul>\n   <li><tt>output-collection as string</tt>: the name of the collection in\n     which the output of the executed query is stored. If not specified,\n     the result of the query will be stored in a collection withing the\n     MongoDB database associated with the project. The name of the\n     collection is randomly generated and starts with <tt>_28.temporary</tt>\n   </li>\n </ul>\n </p>\n", "summary" : "<p>  Schedules an asynchronous job executing the given (public or private)\n query from your project.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "query", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The path of the query to execute, which must begin with /public or /private. (examples: /public/query.xq, /private/query.jq).</div>" }, { "name" : "options", "type" : "object()", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object specifying above options for the asynchronous job.</div>" } ], "returns" : { "type" : "xs:string", "description" : "The id of the scheduled job." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XPTY0004 if the type of a supplied option is incorrect.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0003 if the supplied query path does not begin with /public or /private.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0004 if the supplied query path cannot be resolved.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "function", "qname" : "job:function", "signature" : "($id as xs:string) as xs:string?", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the name of the map or shuffle function used by an asynchronous job.</p>\n", "summary" : "<p>  Returns the name of the map or shuffle function used by an asynchronous job.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "id", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the id of the asynchronous job to query.</div>" } ], "returns" : { "type" : "xs:string?", "description" : "the name of the map or shuffle function of the corresponding asynchronous job." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 1, "name" : "get", "qname" : "job:get", "signature" : "($id as xs:string) as object()*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the asynchronous job associated with the supplied asynchronous job id,\n or the asynchronous jobs associated with the supplied parallel job id.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is internal and should only be used by the parallelism module.</p>\n", "summary" : "<p>  Returns the asynchronous job associated with the supplied asynchronous job id,\n or the asynchronous jobs associated with the supplied parallel job id.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "id", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the id of the asynchronous or parallel job to query.</div>" } ], "returns" : { "type" : "object()*", "description" : "the objects describing the asynchronous jobs." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 1, "name" : "input-collection", "qname" : "job:input-collection", "signature" : "($id as xs:string) as xs:string?", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the name of the input collection of a mapping asynchronous job.</p>\n", "summary" : "<p>  Returns the name of the input collection of a mapping asynchronous job.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "id", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the id of the asynchronous job to query.</div>" } ], "returns" : { "type" : "xs:string?", "description" : "the name of the input collection of the corresponding asynchronous job." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 0, "name" : "jobs", "qname" : "job:jobs", "signature" : "() as object()*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the ids of all jobs created by this project.</p>\n", "summary" : "<p>  Returns the ids of all jobs created by this project.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [  ], "returns" : { "type" : "object()*", "description" : "the sequence of the ids of all jobs created so far." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 1, "name" : "kind", "qname" : "job:kind", "signature" : "($id as xs:string) as xs:string?", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the kind of the asynchronous job.</p>\n", "summary" : "<p>  Returns the kind of the asynchronous job.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "id", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the id of the asynchronous job to query.</div>" } ], "returns" : { "type" : "xs:string?", "description" : "the kind of the asynchronous job." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 2, "name" : "map", "qname" : "job:map", "signature" : "($input-collection as xs:string, $map-function as function (item()*) as item()*) as xs:string", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Schedules an asynchronous job mapping the input collection\n to an output collection with the specified function.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The name of the output collection is randomly generated and\n starts with <tt>_28.temporary</tt>.</p>\n", "summary" : "<p>  Schedules an asynchronous job mapping the input collection\n to an output collection with the specified function.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "input-collection", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The name of the collection that the job processes.</div>" }, { "name" : "map-function", "type" : "function (item()*) as item()*", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The function which is run on the input collection's contents.</div>" } ], "returns" : { "type" : "xs:string", "description" : "The id of the scheduled job, which can be used to pull for the status and results." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0005 if the supplied function does not have a name.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0006 if the supplied function is in the local namespace.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0008 if the supplied input collection does not exist.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "map", "qname" : "job:map", "signature" : "($input-collection as xs:string, $map-function as function (item()*) as item()*, $options as object()?) as xs:string", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Schedules an asynchronous job mapping the input collection\n to an output collection with the specified function.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The $options parameter allows for the specification of properties for\n the map job. Allowed options are:\n <ul>\n   <li><tt>output-collection as string</tt>: the name of the collection in\n     which the output of the executed query is stored. If not specified,\n     the result of the query will be stored in a collection withing the\n     MongoDB database associated with the project. The name of the\n     collection is randomly generated and starts with <tt>_28.temporary</tt>\n   </li>\n   <li><tt>chunk-info as object</tt>: an object containing the specification of a chunk\n     of the input collection. The mapping will only occur on this chunk.\n     If not specified, the entire input collection will be mapped.\n   </li>\n   <li><tt>allow-streaming as boolean</tt>: a boolean indicating if calling the map function can\n     be distributed over partitions of the input collection. If false, the map function will\n     be called only once on the entire input collection. This might result\n     in a cache overflow if the number of items is too big. If true,\n     the input will be arbitrarily partitioned and the map function will be called for each\n     partition. The size of a partition is chosen in order to be smaller than the cache size.\n     The default is false.\n   </li>\n   <li><tt>dependencies as array</tt>: an array containing the ids of all asynchronous jobs that must\n     be completed before this job starts. This job will be hold pending until all these dependencies\n     are completed.\n   </li>\n </ul>\n </p>\n", "summary" : "<p>  Schedules an asynchronous job mapping the input collection\n to an output collection with the specified function.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "input-collection", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The name of the collection that the job processes.</div>" }, { "name" : "map-function", "type" : "function (item()*) as item()*", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The function which is run on the collection's contents.</div>" }, { "name" : "options", "type" : "object()", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object specifying above options for the asynchronous job.</div>" } ], "returns" : { "type" : "xs:string", "description" : "the id of the scheduled job, which can be used to pull for the status and results." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XPTY0004 if the type of a supplied option is incorrect.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0005 if the supplied function does not have a name.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0006 if the supplied function is in the local namespace.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0008 if the supplied input collection does not exist.</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "output-collection", "qname" : "job:output-collection", "signature" : "($id as xs:string) as xs:string?", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the name of the output collection of a mapping or executing asynchronous job.</p>\n", "summary" : "<p>  Returns the name of the output collection of a mapping or executing asynchronous job.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "id", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the id of the asynchronous job to query.</div>" } ], "returns" : { "type" : "xs:string?", "description" : "the name of the output collection of the corresponding asynchronous job." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 1, "name" : "output-collections", "qname" : "job:output-collections", "signature" : "($id as xs:string) as xs:string*", "description" : " Returns the name of the output collections of a shuffle asynchronous job.\n", "summary" : "<p> Returns the name of the output collections of a shuffle asynchronous job.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "id", "type" : "xs:string", "occurrence" : null, "description" : "" } ], "returns" : { "type" : "xs:string*", "description" : "the name of the output collections of the corresponding asynchronous job." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 1, "name" : "properties", "qname" : "job:properties", "signature" : "($id as xs:string) as object()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the properties of an asynchronous job as an object with the following\n fields:</p>\n <ul xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n  <li><tt>accessed</tt>: the time at which the job was last accessed.</li>\n  <li><tt>completed</tt>: the time at which the job was completed.</li>\n  <li><tt>created</tt>: the time at which the job was created.</li>\n  <li><tt>lock-acquired</tt>: the time at which a processing lock was taken on the job.</li>\n  <li><tt>status</tt>: the status of the job. One of <tt>pending</tt>, <tt>in progress</tt>,\n  <tt>completed</tt>, <tt>failed</tt>, <tt>timed out</tt>.</li>\n  <li><tt>error</tt>: An object containing error information in case of failure.</li>\n </ul>\n", "summary" : "<p>  Returns the properties of an asynchronous job as an object with the following\n fields: \n  \n   accessed : the time at which the job was last accessed.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "id", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the id of the asynchronous job to query.</div>" } ], "returns" : { "type" : "object()", "description" : "the time at which the corresponding asynchronous job was last accessed." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 1, "name" : "query-name", "qname" : "job:query-name", "signature" : "($id as xs:string) as xs:string?", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns the name of the query executed by an executing asynchronous job.</p>\n", "summary" : "<p>  Returns the name of the query executed by an executing asynchronous job.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "id", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the id of the asynchronous job to query.</div>" } ], "returns" : { "type" : "xs:string?", "description" : "the name of the query executed by the corresponding asynchronous job." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 1, "name" : "schedule", "qname" : "job:schedule", "signature" : "($jobs as object()*) as object()*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Sends jobs to the job queue.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is internal and should only be used by this and the parallelism module.</p>\n", "summary" : "<p>  Sends jobs to the job queue.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "jobs", "type" : "object()", "occurrence" : "*", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The job to send, as generated by job:build-map-shuffle().</div>" } ], "returns" : { "type" : "object()*", "description" : "Objects containing the new ids." }, "errors" : [  ] }, { "isDocumented" : true, "arity" : 3, "name" : "shuffle", "qname" : "job:shuffle", "signature" : "($input-collection as xs:string, $shuffle-function as function (item()) as xs:integer, $options as object()?) as xs:string", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Schedules an asynchronous job shuffling the items of the input collections to output collections\n using the specified shuffle function.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The $options parameter allows for the specification of properties for\n the shuffle job. Allowed options are:\n <ul>\n   <li><tt>output-collections as array</tt>: an array with the names of the collections in\n     which the items of the input collections are shuffled. Compulsory.\n   </li>\n   <li><tt>chunk-info as object</tt>: an object containing the specification of a chunk\n     of the input collection. The shuffling will only occur on this chunk.\n     If not specified, the entire input collection will be mapped.\n   </li>\n   <li><tt>dependencies as array</tt>: an array containing the ids of all asynchronous jobs that must\n     be completed before this job starts. This job will be hold pending until all these dependencies\n     are completed.\n   </li>\n </ul>\n </p>\n", "summary" : "<p>  Schedules an asynchronous job shuffling the items of the input collections to output collections\n using the specified shuffle function.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "input-collection", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The name of the collection that the job processes.</div>" }, { "name" : "shuffle-function", "type" : "function (item()) as xs:integer", "occurrence" : null, "description" : "" }, { "name" : "options", "type" : "object()", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> An object specifying above options for the asynchronous job.</div>" } ], "returns" : { "type" : "xs:string", "description" : "the id of the scheduled job, which can be used to pull for the status and results." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">err:XPTY0004 if the type of a supplied option is incorrect.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0005 if the supplied function does not have a name.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0006 if the supplied function is in the local namespace.</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">job:JBDY0008 if the supplied input collection does not exist.</xqdoc:error>" ] } ], "variables" : [  ] }