{ "ns" : "http://www.28msec.com/modules/mongodb", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This module provides a driver to access a\n <a href=\"http://www.mongodb.org/\">MongoDB</a> database - similar to\n drivers for other high-level languages like e.g.\n <a href=\"http://api.mongodb.org/python/current/\">PyMongo</a>.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Here is a simple example of how we can raise the salary of each\n developer by 10%.\n Starting with an <em>employees</em> collection in MongoDB that contains\n <pre>\n { \"name\" : \"Peter\", \"role\" : \"developer\" , \"salary\" : 80 }\n { \"name\" : \"Paul\",  \"role\" : \"developer\" , \"salary\" : 75 }\n { \"name\" : \"Mary\",  \"role\" : \"manager\"   , \"salary\" : 90 } </pre>\n we can get a connection\n <pre>\n variable $conn := mongo:connect(\"hostname\", 27017, \"db\", \"user\", \"password\");\n </pre>\n run this update\n <pre>\n for $emp in mongo:find($conn, \"employees\")\n where $emp(\"role\") = \"developer\"\n let $salary := $emp(\"salary\")\n return {\n   replace value of json $emp(\"salary\") with $salary * 1.1;\n   mongo:save($conn, \"employees\", $emp)\n };\n </pre>\n and get the names and the current salaries using\n <pre>\n mongo:find($conn, \"employees\", {}, { \"_id\" : false, \"role\" : false }, {}) </pre>\n In this query we have removed the <em>_id</em> and <em>role</em> fields from\n the results and get\n <pre>\n { \"name\" : \"Peter\", \"salary\" : 88   }\n { \"name\" : \"Paul\",  \"salary\" : 82.5 }\n { \"name\" : \"Mary\",  \"salary\" : 90   }\n </pre>\n </p>\n <h2 xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" id=\"determinism\">Important Notice Regarding Function Determinism</h2>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The non side-effecting functions:\n <ul>\n   <li><a href=\"?anchor=connect-0\">connect#0</a></li>\n   <li><a href=\"?anchor=connect-1\">connect#1</a></li>\n   <li><a href=\"?anchor=connect-2\">connect#2</a></li>\n   <li><a href=\"?anchor=connect-5\">connect#5</a></li>\n   <li><a href=\"?anchor=collection-names-1\">collection-names#1</a></li>\n   <li><a href=\"?anchor=count-2\">count#2</a></li>\n   <li><a href=\"?anchor=count-3\">count#3</a></li>\n   <li><a href=\"?anchor=find-2\">find#2</a></li>\n   <li><a href=\"?anchor=find-3\">find#3</a></li>\n   <li><a href=\"?anchor=find-4\">find#4</a></li>\n   <li><a href=\"?anchor=find-5\">find#5</a></li>\n </ul>\n are declared deterministic, which means that their results could be cached\n when invoked multiple times with the same arguments in the same query execution.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To not use cached results you can use the following alternative functions:\n <ul>\n   <li><a href=\"?anchor=connect-nondeterministic-0\">connect-nondeterministic#0</a></li>\n   <li><a href=\"?anchor=connect-nondeterministic-1\">connect-nondeterministic#1</a></li>\n   <li><a href=\"?anchor=connect-nondeterministic-2\">connect-nondeterministic#2</a></li>\n   <li><a href=\"?anchor=connect-nondeterministic-5\">connect-nondeterministic#5</a></li>\n   <li><a href=\"?anchor=collection-names-nondeterministic-1\">collection-names-nondeterministic#1</a></li>\n   <li><a href=\"?anchor=count-nondeterministic-2\">count-nondeterministic#2</a></li>\n   <li><a href=\"?anchor=count-nondeterministic-3\">count-nondeterministic#3</a></li>\n   <li><a href=\"?anchor=find-nondeterministic-2\">find-nondeterministic#2</a></li>\n   <li><a href=\"?anchor=find-nondeterministic-3\">find-nondeterministic#3</a></li>\n   <li><a href=\"?anchor=find-nondeterministic-4\">find-nondeterministic#4</a></li>\n   <li><a href=\"?anchor=find-nondeterministic-5\">find-nondeterministic#5</a></li>\n </ul>\n which have been declared as being non deterministic.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Three different functions have been defined to run mongo commands:\n <ul>\n   <li><a href=\"?anchor=run-cmd-2\">run-cmd#2</a></li>\n   <li><a href=\"?anchor=run-cmd-nondeterministic-2\">run-cmd-nondeterministic#2</a></li>\n   <li><a href=\"?anchor=run-cmd-deterministic-2\">run-cmd-deterministic#2</a></li>\n </ul>\n If your application depends on the ordering of side-effects from commands issued\n through these functions you should use <a href=\"?anchor=run-cmd-2\">run-cmd#2</a>,\n which has been declared as sequential.\n For non-side-effecting commands you can also use\n <a href=\"?anchor=run-cmd-nondeterministic-2\">run-cmd-nondeterministic#2</a> and\n <a href=\"?anchor=run-cmd-deterministic-2\">run-cmd-deterministic#2</a>.\n The results of commands executed by means of\n <a href=\"?anchor=run-cmd-deterministic-2\">run-cmd-deterministic#2</a> (which is\n declared <i>deterministic</i>) could be cached, whereas the results of\n commands executed by means of\n <a href=\"?anchor=run-cmd-nondeterministic-2\">run-cmd-nondeterministic#2</a> (which is\n declared <i>non-deterministic</i>) are never cached.</p>\n <h2 xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" id=\"navigation-operator-characters\">Important Notice on Navigation and Operator Characters</h2>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n   This module allows to store documents which contain fields whose name starts with a dollar\n   (<code>$</code>) or that contains a dot (<code>.</code>).\n   The\n   <a href=\"?anchor=update-4\">update#4</a>,\n   <a href=\"?anchor=update-5\">update#5</a>,\n   <a href=\"?anchor=remove-3\">remove#3</a>,\n   <a href=\"?anchor=remove-4\">remove#4</a>,\n   <a href=\"?anchor=count-3\">count#3</a>,\n   <a href=\"?anchor=count-4\">count#4</a>,\n   <a href=\"?anchor=find-3\">find#3</a>,\n   <a href=\"?anchor=find-4\">find#4</a>,\n   <a href=\"?anchor=find-5\">find#5</a>,\n   <a href=\"?anchor=run-cmd-2\">run-cmd#2</a>,\n   <a href=\"?anchor=run-cmd-3\">run-cmd#3</a> methods and their (non-)deterministic alternatives accept\n   query/projection/command objects where these two character have a special meaning.\n   Specifically, a field that starts with a dollar is a MongoDB operator (for instance the\n   <code>$and</code> operator) and where the dot character is used for navigating nested\n   fields.\n   To specify a query/projection/command object that refers to fields which contain dots or that start\n   with a dollar, you may specify a different navigation/operator character, using the\n   <code>navigation-character</code> and <code>operator-character</code> options.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n   For instance, starting with an empty <code>collection</code> collection, the following query\n   exemplifies the common usage of the find function:\n   <pre>\n   variable $conn := mongo:connect(\"hostname\", 27017, \"db\", \"user\", \"password\");\n   mongo:save($conn, \"collection\", { \"a\": { \"b_c\" : 1 });\n   mongo:find($conn, \"collection\", { \"a.b_c\": 1})\n   </pre>\n   The third parameter of the find#3 function specifies to look for documents which contain a\n   <code>b_c</code> field nested into an <code>a</code> field.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n   Consider now the case where we store a document with a field which contain dots:\n   <pre>\n   variable $conn := mongo:connect(\"hostname\", 27017, \"db\", \"user\", \"password\");\n   mongo:save($conn, \"collection\", { \"a\": { \"b.c\" : 1 });\n   mongo:find($conn, \"collection\", { \"a/b.c\": 1}, {\"navigation-character\": \"/\"})\n   </pre>\n </p>\n <h2 xmlns:xqdoc=\"http://www.xqdoc.org/1.0\" id=\"implicit-escaping\">Implicit Escaping of MongoDB documents</h2>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n   MongoDB <a href=\"http://docs.mongodb.org/manual/reference/limits/#Restrictions-on-Field-Names\">\n   does not allow to store</a> document fields that contain dots\n   <code>.</code>, null characters, or that start with a dollar sign <code>$</code>.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n   When storing a document this module automatically escapes fields names replacing dots\n   and dollars (when at the beginning of a field name) characters with their Unicode full\n   width equivalents: U+FF04 (<code>＄</code>) and U+FF0E (<code>．</code>), following the\n   <a href=\"http://docs.mongodb.org/manual/faq/developers/#faq-dollar-sign-escaping\">\n   MongoDB escaping best practices</a>.\n   Conversely, when retrieving a document from a collection, this escaping is reversed.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n   For instance, starting with an empty <code>collection</code> collection, the following query:\n   <pre>\n   variable $conn := mongo:connect(\"hostname\", 27017, \"db\", \"user\", \"password\");\n   mongo:save($conn, \"collection\", { \"a\": 1, \"a.b\" : 2 });\n   mongo:find($conn, \"collection\")\n   </pre>\n   will return the document <code>{ \"a\": 1, \"a.b\" : 2 }</code>, where both the query and\n   the returned document contain only the common dot <code>.</code> character.\n   Internally, MongoDB will store the document <code>{ \"a\": 1, \"a．b\" : 2 }</code> which\n   contains the U+FF0E (<code>．</code>) character.\n </p>\n", "sees" : [  ], "authors" : [ "<xqdoc:author xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">28msec</xqdoc:author>" ], "version" : null, "encoding" : "utf-8", "namespaces" : [ { "uri" : "http://zorba.io/annotations", "prefix" : "an" }, { "uri" : "http://www.28msec.com/modules/credentials", "prefix" : "credentials" }, { "uri" : "http://www.28msec.com/modules/mongodb/types", "prefix" : "m-schema" }, { "uri" : "http://www.28msec.com/modules/mongodb", "prefix" : "mongo" }, { "uri" : "http://zorba.io/options/versioning", "prefix" : "ver" } ], "functions" : [ { "isDocumented" : true, "arity" : 1, "name" : "collection-names-nondeterministic", "qname" : "mongo:collection-names-nondeterministic", "signature" : "($db as xs:anyURI) as xs:string* external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Get a list of all the collection names in this database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as\n <a href=\"#collection-names-1\">collection-names#1</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n", "summary" : "<p>  Get a list of all the collection names in this database.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" } ], "returns" : { "type" : "xs:string*", "description" : "a list of the names of all collection in the given database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "collection-names", "qname" : "mongo:collection-names", "signature" : "($db as xs:anyURI) as xs:string* external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Get a list of all the collection names in this database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n", "summary" : "<p>  Get a list of all the collection names in this database.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" } ], "returns" : { "type" : "xs:string*", "description" : "a list of the names of all collection in the given database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 0, "name" : "connect-nondeterministic", "qname" : "mongo:connect-nondeterministic", "signature" : "() as xs:anyURI", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Connect to this project's default MongoDB database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#connect-0\">connect#0</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n", "summary" : "<p>  Connect to this project's default MongoDB database.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [  ], "returns" : { "type" : "xs:anyURI", "description" : "an identifier for a connection to the MongoDB database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO002 connection to MongoDB failed</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO003 authentication to the MongoDB database failed</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "connect-nondeterministic", "qname" : "mongo:connect-nondeterministic", "signature" : "($connection-config as item()) as xs:anyURI", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Connect to a MongoDB database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#connect-1\">connect#1</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n", "summary" : "<p>  Connect to a MongoDB database.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "connection-config", "type" : "item()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the connection specification.</div>" } ], "returns" : { "type" : "xs:anyURI", "description" : "an identifier for a connection to the MongoDB database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO001 if the connection specification is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO002 connection to MongoDB failed</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO003 authentication to the MongoDB database failed</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "connect-nondeterministic", "qname" : "mongo:connect-nondeterministic", "signature" : "($credentials-name as xs:string?, $options as object()) as xs:anyURI", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Connect to a MongoDB database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#connect-2\">connect#2</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n", "summary" : "<p>  Connect to a MongoDB database.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "credentials-name", "type" : "xs:string", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the credentials to use.</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the credentials to use.</div>" } ], "returns" : { "type" : "xs:anyURI", "description" : "an identifier for a connection to the MongoDB database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO001 if the connection specification is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO002 connection to MongoDB failed</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO003 authentication to the MongoDB database failed</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 5, "name" : "connect-nondeterministic", "qname" : "mongo:connect-nondeterministic", "signature" : "($host as xs:string, $port as xs:integer?, $db as xs:string, $user as xs:string?, $pass as xs:string?) as xs:anyURI", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Connect to a MongoDB database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#connect-5\">connect#5</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n", "summary" : "<p>  Connect to a MongoDB database.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the host to connect to</div>" }, { "name" : "port", "type" : "xs:integer", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the port to connect to</div>" }, { "name" : "db", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the database to connect to</div>" }, { "name" : "user", "type" : "xs:string", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the user used to authorize access to the db</div>" }, { "name" : "pass", "type" : "xs:string", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the password used to authorize access to the db</div>" } ], "returns" : { "type" : "xs:anyURI", "description" : "an identifier for a connection to the MongoDB database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO002 connection to MongoDB failed</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO003 authentication to the MongoDB database failed</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 0, "name" : "connect", "qname" : "mongo:connect", "signature" : "() as xs:anyURI", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Connect to this project's default MongoDB database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n", "summary" : "<p>  Connect to this project's default MongoDB database.</p>", "annotation_str" : " %an:strictlydeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "strictlydeterministic", "value" : "" } ], "updating" : false, "parameters" : [  ], "returns" : { "type" : "xs:anyURI", "description" : "an identifier for a connection to the MongoDB database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO002 connection to MongoDB failed</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO003 authentication to the MongoDB database failed</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "connect", "qname" : "mongo:connect", "signature" : "($connection-config as item()) as xs:anyURI", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Connect to a MongoDB database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The $connection-config parameter is used to specify the connection information.\n If a string is used, then the function will interpret it as the name of\n a credential in the MongoDB category.\n If an object is used, then the function will open a connection using it.\n The object structure is the following:\n <ul>\n   <li>host (string; mandatory)</li>\n   <li>port (integer; default: 27017)</li>\n   <li>db (string; mandatory)</li>\n   <li>user (string)</li>\n   <li>pass (string)</li>\n   <li>timeout (decimal; default: 0)</li>\n   <li>pre-digested (boolean; default: false)</li>\n </ul>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For example, using stored credential:\n <pre>mongo:connect(\"credentials-name\")</pre>\n <p>For example, specifying the connection information:</p>\n <pre>mongo:connect(\n   {\n     \"host\": \"hostname\",\n     \"port\": 11011,\n     \"db\": \"mydb\",\n     \"user\": \"myuser\"\n     \"password: \"mypass\"\n   })</pre>.\n </p>\n", "summary" : "<p>  Connect to a MongoDB database.</p>", "annotation_str" : " %an:strictlydeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "strictlydeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "connection-config", "type" : "item()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the connection specification.</div>" } ], "returns" : { "type" : "xs:anyURI", "description" : "an identifier for a connection to the MongoDB database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO001 if the connection specification is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO002 connection to MongoDB failed</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO003 authentication to the MongoDB database failed</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "connect", "qname" : "mongo:connect", "signature" : "($credentials-name as xs:string?, $options as object()) as xs:anyURI", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Connect to a MongoDB database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The $credentials-name parameter is used to specify the connection information.\n If empty a connection will be opened to the project default MongoDB database.\n Otherwise, the function will use it to identify a credential in the MongoDB category.\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> The $options object can be used to specify connection options. The following\n fields are supported:\n <ul>\n   <li>timeout (decimal; default: 0)</li>\n </ul>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For example, connecting to the project default MongoDB database:\n <pre>mongo:connect((), {\"timeout\": 10})</pre>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">For example, specifying the connection information:\n <pre>mongo:connect(\"credentials-name\", {\"timeout\": 10})</pre>\n </p>\n", "summary" : "<p>  Connect to a MongoDB database.</p>", "annotation_str" : " %an:strictlydeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "strictlydeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "credentials-name", "type" : "xs:string", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the credentials to use.</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the credentials to use.</div>" } ], "returns" : { "type" : "xs:anyURI", "description" : "an identifier for a connection to the MongoDB database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO001 if the connection specification is invalid</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO002 connection to MongoDB failed</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO003 authentication to the MongoDB database failed</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 5, "name" : "connect", "qname" : "mongo:connect", "signature" : "($host as xs:string, $port as xs:integer?, $db as xs:string, $user as xs:string?, $pass as xs:string?) as xs:anyURI", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Connect to a MongoDB database.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n", "summary" : "<p>  Connect to a MongoDB database.</p>", "annotation_str" : " %an:strictlydeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "strictlydeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "host", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the host to connect to</div>" }, { "name" : "port", "type" : "xs:integer", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the port to connect to</div>" }, { "name" : "db", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the database to connect to</div>" }, { "name" : "user", "type" : "xs:string", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the user used to authorize access to the db</div>" }, { "name" : "pass", "type" : "xs:string", "occurrence" : "?", "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the password used to authorize access to the db</div>" } ], "returns" : { "type" : "xs:anyURI", "description" : "an identifier for a connection to the MongoDB database." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO002 connection to MongoDB failed</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO003 authentication to the MongoDB database failed</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "copy", "qname" : "mongo:copy", "signature" : "($db as xs:anyURI, $from-db as xs:string, $to-db as xs:string) as empty-sequence()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Copies a MongoDB database. Be aware, you must call\n this function on the admin database.</p>\n", "summary" : "<p>  Copies a MongoDB database.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "from-db", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the source database</div>" }, { "name" : "to-db", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the target database</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "the function has side-effects and returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if copy operation fails</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "count-nondeterministic", "qname" : "mongo:count-nondeterministic", "signature" : "($db as xs:anyURI, $coll as xs:string) as xs:integer external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Counts the number of documents in the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#count-2\">count#2</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n", "summary" : "<p>  Counts the number of documents in the given collection.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" } ], "returns" : { "type" : "xs:integer", "description" : "the said count" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "count-nondeterministic", "qname" : "mongo:count-nondeterministic", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object()) as xs:integer external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Counts the number of documents satisfying the query in the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#count-3\">count#3</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To refer to field names starting with a dollar or containing dots in the $query object you should\n use count-nondeterministic#4 and specify the navigation-character/operator-character options.</p>\n", "summary" : "<p>  Counts the number of documents satisfying the query in the given collection.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query specifying which objects to count</div>" } ], "returns" : { "type" : "xs:integer", "description" : "the said count" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "count-nondeterministic", "qname" : "mongo:count-nondeterministic", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object(), $options as object()) as xs:integer external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Counts the number of documents satisfying the query in the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#count-3\">count#3</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Available options:\n <ul>\n  <li>navigation-character: the character that is used to navigate object fields in the\n      $query argument. Default is \".\".</li>\n  <li>operator-character: the character that is used to specify query operators in the\n      $query argument. Default is \"$\".</li>\n </ul>\n </p>\n", "summary" : "<p>  Counts the number of documents satisfying the query in the given collection.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query specifying which objects to count</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "xs:integer", "description" : "the said count" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "count", "qname" : "mongo:count", "signature" : "($db as xs:anyURI, $coll as xs:string) as xs:integer external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Counts the number of documents in the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n", "summary" : "<p>  Counts the number of documents in the given collection.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" } ], "returns" : { "type" : "xs:integer", "description" : "the said count" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "count", "qname" : "mongo:count", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object()) as xs:integer external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Counts the number of documents satisfying the query in the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To refer to field names starting with a dollar or containing dots in the $query object\n you should use count#4 and specify the navigation-character/operator-character options.</p>\n", "summary" : "<p>  Counts the number of documents satisfying the query in the given collection.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query specifying which objects to count</div>" } ], "returns" : { "type" : "xs:integer", "description" : "the said count" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "count", "qname" : "mongo:count", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object(), $options as object()) as xs:integer external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Counts the number of documents satisfying the query in the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Available options:\n <ul>\n  <li>navigation-character: the character that is used to navigate object fields in the\n      $query argument. Default is \".\".</li>\n  <li>operator-character: the character that is used to specify query operators in the\n      $query argument. Default is \"$\".</li>\n </ul>\n </p>\n", "summary" : "<p>  Counts the number of documents satisfying the query in the given collection.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query specifying which objects to count</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "xs:integer", "description" : "the said count" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "disconnect", "qname" : "mongo:disconnect", "signature" : "($db as xs:anyURI) as empty-sequence() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Disconnect from a MongoDB database.</p>\n", "summary" : "<p>  Disconnect from a MongoDB database.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "the function has side-effects and returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "drop-collection", "qname" : "mongo:drop-collection", "signature" : "($db as xs:anyURI, $coll as xs:string) as empty-sequence() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Drop a collection.</p>\n", "summary" : "<p>  Drop a collection.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "the function has side-effects and returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "find-nondeterministic", "qname" : "mongo:find-nondeterministic", "signature" : "($db as xs:anyURI, $coll as xs:string) as object()*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns all objects of the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#find-2\">find#2</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n", "summary" : "<p>  Returns all objects of the given collection.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" } ], "returns" : { "type" : "object()*", "description" : "all objects of the given collection" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "find-nondeterministic", "qname" : "mongo:find-nondeterministic", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object()) as object()*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs a query operation on the given collection and\n returns all matches.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#find-3\">find#3</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To refer to field names starting with a dollar or containing dots in the $query object\n you should use find-nondeterministic#4 and specify the navigation-character/operator-character options.</p>\n", "summary" : "<p>  Performs a query operation on the given collection and\n returns all matches.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query operation to perform</div>" } ], "returns" : { "type" : "object()*", "description" : "all matches returned by the given query operation" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given query could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "find-nondeterministic", "qname" : "mongo:find-nondeterministic", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object(), $options as object()) as object()*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs a query operation on the given collection and\n returns all matches.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#find-4\">find#4</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n", "summary" : "<p>  Performs a query operation on the given collection and\n returns all matches.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query operation to perform</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation (see find#5 for available options)</div>" } ], "returns" : { "type" : "object()*", "description" : "all matches returned by the given query operation" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given query could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 5, "name" : "find-nondeterministic", "qname" : "mongo:find-nondeterministic", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object(), $projection as object(), $options as object()) as object()* external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs a query operation on the given collection and\n returns all matches.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function has the same semantics as <a href=\"#find-5\">find#5</a>,\n but is declared as being non deterministic and thus should only be used when\n result caching is not desired.</p>\n", "summary" : "<p>  Performs a query operation on the given collection and\n returns all matches.</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query operation to perform</div>" }, { "name" : "projection", "type" : "object()", "occurrence" : null, "description" : "" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "object()*", "description" : "all matches returned by the given query operation" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given query or projection could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "find", "qname" : "mongo:find", "signature" : "($db as xs:anyURI, $coll as xs:string) as object()*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Returns all objects of the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n", "summary" : "<p>  Returns all objects of the given collection.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" } ], "returns" : { "type" : "object()*", "description" : "all objects of the given collection" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "find", "qname" : "mongo:find", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object()) as object()*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs a query operation on the given collection and\n returns all matches.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To refer to field names starting with a dollar or containing dots in the $query object\n you should use find#4 and specify the navigation-character/operator-character options.</p>\n", "summary" : "<p>  Performs a query operation on the given collection and\n returns all matches.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query operation to perform</div>" } ], "returns" : { "type" : "object()*", "description" : "all matches returned by the given query operation" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given query could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "find", "qname" : "mongo:find", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object(), $options as object()) as object()*", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs a query operation on the given collection and\n returns all matches.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n", "summary" : "<p>  Performs a query operation on the given collection and\n returns all matches.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query operation to perform</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation (see find#5 for available options)</div>" } ], "returns" : { "type" : "object()*", "description" : "all matches returned by the given query operation" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given query could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 5, "name" : "find", "qname" : "mongo:find", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object(), $projection as object(), $options as object()) as object()* external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs a query operation on the given collection and\n returns all matches.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is declared as deterministic and should be used whenever result\n caching is acceptable.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Available options:\n <ul>\n   <li>to-return: the maximum number of objects to return (0 = unlimited)</li>\n   <li>to-skip: start with the n-th object</li>\n   <li>batch-size: the number of objects to return in one batch</li>\n   <li>slave-ok: allow this query to be run against a replica secondary</li>\n   <li>await-data: the server will block for some extra time before returning,\n   waiting for more data to return</li>\n   <li>partial-results: return partial results if some shards are down instead\n   of returning an error</li>\n   <li>explain: return explain information about execution of this query instead\n   of the actual query results</li>\n   <li>navigation-character: the character that is used to navigate object fields in the\n      $query and $projection arguments. Default is \".\".</li>\n   <li>operator-character: the character that is used to specify query operators in the\n      $query and $projection arguments. Default is \"$\".</li>\n </ul>\n </p>\n", "summary" : "<p>  Performs a query operation on the given collection and\n returns all matches.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query operation to perform</div>" }, { "name" : "projection", "type" : "object()", "occurrence" : null, "description" : "" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "object()*", "description" : "all matches returned by the given query operation" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given query or projection could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 1, "name" : "is-connected", "qname" : "mongo:is-connected", "signature" : "($db as xs:anyURI) as xs:boolean external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Checks if the given identifiers is valid and the corresponding\n connection is open.</p>\n", "summary" : "<p>  Checks if the given identifiers is valid and the corresponding\n connection is open.</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" } ], "returns" : { "type" : "xs:boolean", "description" : "true if the given connection identifier is valid and the corresponding connection is open, false otherwise." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "remove", "qname" : "mongo:remove", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object()) as empty-sequence()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs a remove operation on the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The operation will be checked and an error is raised if\n one of them fails.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To refer to field names starting with a dollar or containing dots in the $query object\n you should use remove#4 and specify the navigation-character/operator-character options.</p>\n", "summary" : "<p>  Performs a remove operation on the given collection.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query that identifies the documents to remove</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "the function has side-effects and returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given document could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "remove", "qname" : "mongo:remove", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object(), $options as object()) as empty-sequence() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs a remove operation on the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n <ul>\n   <li>safe: If to true, the operation will wait for a response from\n    the database and an error is raised if the operation fails.\n    Otherwise, the operation will not wait for a response.</li>\n  <li>just-one: true if the operation should stop after a single match\n    has been found and deleted</li>\n  <li>navigation-character: the character that is used to navigate object fields in the\n      $query argument. Default is \".\".</li>\n  <li>operator-character: the character that is used to specify query operators in the\n      $query argument. Default is \"$\".</li>\n </ul>\n </p>\n", "summary" : "<p>  Performs a remove operation on the given collection.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query that identifies the documents to remove</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "the function has side-effects and returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given document could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "run-cmd-deterministic", "qname" : "mongo:run-cmd-deterministic", "signature" : "($db as xs:anyURI, $cmd as object()) as object() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Executes a\n <a href=\"http://docs.mongodb.org/manual/reference/commands/\">database command</a>.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is marked as deterministic and should be used whenever the\n specified command has no side-effects and result caching is desired.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To refer to field names starting with a dollar or containing dots in the $cmd object\n you should use run-cmd-deterministic#3 and specify the navigation-character/operator-character options.</p>\n", "summary" : "<p>  Executes a\n  database command .</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "cmd", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the database command to execute</div>" } ], "returns" : { "type" : "object()", "description" : "The result object. Typically has { ok : ..., errmsg : ... } fields set." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "run-cmd-deterministic", "qname" : "mongo:run-cmd-deterministic", "signature" : "($db as xs:anyURI, $cmd as object(), $options as object()) as object() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Executes a\n <a href=\"http://docs.mongodb.org/manual/reference/commands/\">database command</a>.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Available options:\n <ul>\n  <li>navigation-character: the character that is used to navigate object fields in the\n      $cmd argument. Default is \".\".</li>\n  <li>operator-character: the character that is used to specify query operators in the\n      $cmd argument. Default is \"$\".</li>\n </ul>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is marked as deterministic and should be used whenever the\n specified command has no side-effects and result caching is desired.</p>\n", "summary" : "<p>  Executes a\n  database command .</p>", "annotation_str" : "", "annotations" : [  ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "cmd", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the database command to execute</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "object()", "description" : "The result object. Typically has { ok : ..., errmsg : ... } fields set." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "run-cmd-nondeterministic", "qname" : "mongo:run-cmd-nondeterministic", "signature" : "($db as xs:anyURI, $cmd as object()) as object() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Executes a\n <a href=\"http://docs.mongodb.org/manual/reference/commands/\">database command</a>.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is marked as non-deterministic and should be used whenever the\n specified command has no side-effects and result caching is undesired.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To refer to field names starting with a dollar or containing dots in the $cmd object\n you should use run-cmd-nondeterministic#3 and specify the navigation-character/operator-character options.</p>\n", "summary" : "<p>  Executes a\n  database command .</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "cmd", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the database command to execute</div>" } ], "returns" : { "type" : "object()", "description" : "The result object. Typically has { ok : ..., errmsg : ... } fields set." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "run-cmd-nondeterministic", "qname" : "mongo:run-cmd-nondeterministic", "signature" : "($db as xs:anyURI, $cmd as object(), $options as object()) as object() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Executes a\n <a href=\"http://docs.mongodb.org/manual/reference/commands/\">database command</a>.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Available options:\n <ul>\n  <li>navigation-character: the character that is used to navigate object fields in the\n      $cmd argument. Default is \".\".</li>\n  <li>operator-character: the character that is used to specify query operators in the\n      $cmd argument. Default is \"$\".</li>\n </ul>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is marked as non-deterministic and should be used whenever the\n specified command has no side-effects and result caching is undesired.</p>\n", "summary" : "<p>  Executes a\n  database command .</p>", "annotation_str" : " %an:nondeterministic", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "nondeterministic", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "cmd", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the database command to execute</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "object()", "description" : "The result object. Typically has { ok : ..., errmsg : ... } fields set." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 2, "name" : "run-cmd", "qname" : "mongo:run-cmd", "signature" : "($db as xs:anyURI, $cmd as object()) as object() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Executes a\n <a href=\"http://docs.mongodb.org/manual/reference/commands/\">database command</a>.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is marked as sequential and should be used whenever the\n specified command has side-effects.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To refer to field names starting with a dollar or containing dots in the $cmd object\n you should use run-cmd#3 and specify the navigation-character/operator-character options.</p>\n", "summary" : "<p>  Executes a\n  database command .</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "cmd", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the database command to execute</div>" } ], "returns" : { "type" : "object()", "description" : "The result object. Typically has { ok : ..., errmsg : ... } fields set." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "run-cmd", "qname" : "mongo:run-cmd", "signature" : "($db as xs:anyURI, $cmd as object(), $options as object()) as object() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Executes a\n <a href=\"http://docs.mongodb.org/manual/reference/commands/\">database command</a>.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Available options:\n <ul>\n  <li>navigation-character: the character that is used to navigate object fields in the\n      $cmd argument. Default is \".\".</li>\n  <li>operator-character: the character that is used to specify query operators in the\n      $cmd argument. Default is \"$\".</li>\n </ul>\n </p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">This function is marked as sequential and should be used whenever the\n specified command has side-effects.</p>\n", "summary" : "<p>  Executes a\n  database command .</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "cmd", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the database command to execute</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "object()", "description" : "The result object. Typically has { ok : ..., errmsg : ... } fields set." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if any mongodb error happens</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 3, "name" : "save", "qname" : "mongo:save", "signature" : "($db as xs:anyURI, $coll as xs:string, $doc as object()) as empty-sequence()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Save a document in the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If the document to be saved already has an \"_id\" field, then an\n upsert operation is performed an any existing document with that\n id will be overwritten. Otherwise, an insert operation is performed\n and the \"_id\" generated for each document will be returned.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The success of the operation will be checked and an error is raised if\n the operation failed.</p>\n", "summary" : "<p>  Save a document in the given collection.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "doc", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the document to be saved or upserted</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "the empty sequence" }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given document could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "save", "qname" : "mongo:save", "signature" : "($db as xs:anyURI, $coll as xs:string, $doc as object(), $options as object()) as m-schema:oid? external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Save a document in the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If the document to be saved already has an \"_id\" field, then an\n upsert operation is performed and any existing document with that\n id will be overwritten. Otherwise, an insert operation is performed.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If the manipulate option is set to true, an \"_id\" field will be\n added to the document. The new id will be returned. Otherwise,\n the \"_id\" field will be added by the server.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">If the safe options is set to true, the operation will wait for a\n response from the database and an error is raised if the operation\n failed. Otherwise, the operation will not wait for a response.</p>\n", "summary" : "<p>  Save a document in the given collection.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "doc", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the document to be saved or upserted</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "m-schema:oid?", "description" : "a generated OID if the manipulate option was set to true, the empty sequence otherwise." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given document could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 4, "name" : "update", "qname" : "mongo:update", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object(), $update as object()) as empty-sequence()", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs an update command on the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">The operation will be checked and an error is raised if\n one of them fails. Also, this function only modifies one\n document matching the query and does not do any upserts.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">To refer to field names starting with a dollar or containing dots in the $query or $update object\n you should use update#5 and specify the navigation-character/operator-character options.</p>\n", "summary" : "<p>  Performs an update command on the given collection.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query to select the objects that are updated</div>" }, { "name" : "update", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the update specification to be performed</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "the function has side-effects and returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given objects could not be converted to BSON</xqdoc:error>" ] }, { "isDocumented" : true, "arity" : 5, "name" : "update", "qname" : "mongo:update", "signature" : "($db as xs:anyURI, $coll as xs:string, $query as object(), $update as object(), $options as object()) as empty-sequence() external", "description" : " <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">Performs an update operation on the given collection.</p>\n <p xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">\n <ul>\n   <li>safe: If to true, the operation will wait for a response from\n    the database and an error is raised if the operation fails.\n    Otherwise, the operation will not wait for a response.</li>\n  <li>multi: indicates if all documents matching criteria should be updated\n  rather than just one.</li>\n  <li>upsert: if this should be an \"upsert\" operation; that is,\n  if the record(s) do not exist, insert one. Upsert only inserts a single document.</li>\n  <li>navigation-character: the character that is used to navigate object fields\n      in both the $query and $update fields. Default is \".\".</li>\n  <li>operator-character: the character that is used to specify MongoDB operators\n      in both the $query and $update fields. Default is \"$\".</li>\n </ul>\n </p>\n", "summary" : "<p>  Performs an update operation on the given collection.</p>", "annotation_str" : " %an:sequential", "annotations" : [ { "prefix" : "an", "ns" : "http://zorba.io/annotations", "name" : "sequential", "value" : "" } ], "updating" : false, "parameters" : [ { "name" : "db", "type" : "xs:anyURI", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> a database connection identifier</div>" }, { "name" : "coll", "type" : "xs:string", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the name of the collection</div>" }, { "name" : "query", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the query to select the objects that are updated</div>" }, { "name" : "update", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the update specification to be performed</div>" }, { "name" : "options", "type" : "object()", "occurrence" : null, "description" : "<div xmlns:xqdoc=\"http://www.xqdoc.org/1.0\"> the options for this operation</div>" } ], "returns" : { "type" : "empty-sequence()", "description" : "the function has side-effects and returns the empty sequence." }, "errors" : [ "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO004 invalid database identifier</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO005 if any mongodb error happens</xqdoc:error>", "<xqdoc:error xmlns:xqdoc=\"http://www.xqdoc.org/1.0\">mongo:MONGO006 if the given objects could not be converted to BSON</xqdoc:error>" ] } ], "variables" : [  ] }